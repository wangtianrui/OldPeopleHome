## zigbee协议栈

#### 整体功能概述：

* 每个老人一个手环，手环可以获取到老人的**地点、心率、步数**等信息

* 每个老人的房间门上有一个**RFID**卡（反正能扫描后获取ID的），可以通过**扫描**这个卡，获取到老人的身体情况和当天运动情况
* 老人房间情况：**温度**、**湿度**、**有没有人**等，可以定时上传到服务器

* 子女有个app，可以查看绑定了的老人的所有信息（地图可视化、身体信息可视化）
* 子女app还可以看老人房间的情况，看是不是过于热或者过于潮湿，如果有问题就可以联系管理人员进行帮助
* 子女可以为绑定的老人设置个人信息（比如病理啥的，一般是对环境有要求的），比如设置了风湿，那房间湿度过高就自动提醒子女和管理员
* 管理员（养老院方）有一个网站，可以查看到所有老人的情况

#### 细节功能实现

|     功能描述     |                             实现                             |
| :--------------: | :----------------------------------------------------------: |
| 老人身体情况获取 | **开源手环**通过**蓝牙**给老人随身携带的**app**发送数据，然后app传到**服务器** |
| 老人房门数据获取 | **~~RFID~~二维码**获得老人的ID，通过ID从**服务器**获取老人的资料（这里我不太懂，有问题请改正） |
|    子女App端     | 百度地图可视化老人轨迹、可视化老人运动量（步数）、可视化老人身体情况、联系老人、紧急联络管理人员、获取老人房间数据 |
| 管理员（Web端）  | 对老人进行管理，可以根据体检信息给老人更新老人的数据，可以点击相应老人查看老人的情况等、可以紧急联系子女 |
| 老人房间信息获取 |     **温湿度传感器**等，通过zigbee与服务器连接进行增删改     |

#### 软硬件需求

|          类型           |                             需求                             |
| :---------------------: | :----------------------------------------------------------: |
|          硬件           | ①手环：定位、老人身体信息、能通过蓝牙和app传信息   ②房间传感器：获取温湿度等，能与服务器交互   ③RFID：能扫描后获得老人的信息 ④物联网开发实验箱|
|         前端app         | ①绑定老人：一个账号只能绑定1~4位老人，也可取消绑定  ②地图可视化：可视化老人一天的移动轨迹  ③步数、身体信息可视化  ④老人病理填写   ⑤获取老人的身体信息（体检的，由管理员上传的） |
|         前端Web         | ①可视化所有老人的行踪（不用放在一个地图上，每个老人一个地图，不好做的话留着最后来）②老人信息增删改 ③老人体质信息可视化：这个最好做成折线图，展示一个月来的情况 |
|          后台           |                     SSM、给前端提供相应                      |
| 看情况我在加个管理员app | RFID采用二维码方式标记每个老人的房门，管理员APP可以通过扫码获取相关老人的信息进行查看修改添加相关信息，可是实现移动端的老人信息管理|

#### z-stack协议栈详细解决方案

* 网络拓扑类型：网状拓扑
* 网络类型：zigbee网络，无线局域网
* 协议栈版本：Z-stack 3.0.2
* 传感器：温、湿度传感器两个，人体红外传感器两个，运动手环两个，执行器三个
* 角色：终端，协调器，网关，后台主机
* 协议：zigbee，TCP/IP，BLE 4.0
* 
#### 手环功能

* 步数
* 心率
* <u>定位</u>
* 睡眠

#### APP（老人端）
* 测心率
* 测步数
* 轨迹记录
* 定位
* 可视化数据
#### APP（子女端）
* 定位
* 可视化数据

