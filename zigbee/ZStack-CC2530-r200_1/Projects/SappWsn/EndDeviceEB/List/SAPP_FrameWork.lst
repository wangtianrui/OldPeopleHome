###############################################################################
#                                                                             #
# IAR C/C++ Compiler V8.10.1.10194/W32 for 8051         02/Sep/2019  17:51:12 #
# Copyright 2004-2011 IAR Systems AB.                                         #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data_rom                                           #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\Source\SAPP_FrameWork.c         #
#    Command line       =  -f C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\zstack\Tools\CC2530DB\f8w #
#                          Endev.cfg (-DCPU32MHZ -DROOT=__near_func           #
#                          -DMAC_CFG_TX_DATA_MAX=3 -DMAC_CFG_TX_MAX=6         #
#                          -DMAC_CFG_RX_MAX=3) -f C:\Users\Administrator\Desk #
#                          top\ZStack-CC2530-r200_1\Projects\SappWsn\..\zstac #
#                          k\Tools\CC2530DB\f8wConfig.cfg (-DZIGBEEPRO        #
#                          -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR       #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0x94127                      #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DLINK_STATUS_JITTER_MASK=0x007F                   #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3    #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40           #
#                          -DNWK_MAX_BINDING_ENTRIES=4                        #
#                          -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DMAC_MAX_FRAME_SIZE=116                           #
#                          -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const     #
#                          __code" -DGENERIC=__generic                        #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 C:\Users\Administrator\Desk #
#                          top\ZStack-CC2530-r200_1\Projects\SappWsn\Source\S #
#                          APP_FrameWork.c -D NWK_AUTO_POLL -D ZTOOL_P1 -D    #
#                          xMT_TASK -D xMT_SYS_FUNC -D MT_ZDO_FUNC -D         #
#                          SAPP_ZSTACK -lC C:\Users\Administrator\Desktop\ZSt #
#                          ack-CC2530-r200_1\Projects\SappWsn\EndDeviceEB\Lis #
#                          t\ -lA C:\Users\Administrator\Desktop\ZStack-CC253 #
#                          0-r200_1\Projects\SappWsn\EndDeviceEB\List\        #
#                          --diag_suppress Pe001,Pa010 -o                     #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\EndDeviceEB\Obj\ -e             #
#                          --no_code_motion --debug --core=plain --dptr=16,1  #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data_rom --nr_virtual_regs 16    #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\ -I                          #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\Source\ -I                      #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\zstack\ZMain\TI2530DB\ -I    #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\hal\include\   #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\..\Components\hal\target\ #
#                          CC2530EB\ -I C:\Users\Administrator\Desktop\ZStack #
#                          -CC2530-r200_1\Projects\SappWsn\..\..\Components\m #
#                          ac\include\ -I C:\Users\Administrator\Desktop\ZSta #
#                          ck-CC2530-r200_1\Projects\SappWsn\..\..\Components #
#                          \mac\high_level\ -I C:\Users\Administrator\Desktop #
#                          \ZStack-CC2530-r200_1\Projects\SappWsn\..\..\Compo #
#                          nents\mac\low_level\srf04\ -I                      #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\mac\low_level\ #
#                          srf04\single_chip\ -I C:\Users\Administrator\Deskt #
#                          op\ZStack-CC2530-r200_1\Projects\SappWsn\..\..\Com #
#                          ponents\mt\ -I C:\Users\Administrator\Desktop\ZSta #
#                          ck-CC2530-r200_1\Projects\SappWsn\..\..\Components #
#                          \osal\include\ -I C:\Users\Administrator\Desktop\Z #
#                          Stack-CC2530-r200_1\Projects\SappWsn\..\..\Compone #
#                          nts\services\saddr\ -I C:\Users\Administrator\Desk #
#                          top\ZStack-CC2530-r200_1\Projects\SappWsn\..\..\Co #
#                          mponents\services\sdata\ -I                        #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\stack\af\ -I   #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\stack\nwk\ -I  #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\stack\sapi\    #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\..\Components\stack\sec\  #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\..\Components\stack\sys\  #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\..\Components\stack\zdo\  #
#                          -I C:\Users\Administrator\Desktop\ZStack-CC2530-r2 #
#                          00_1\Projects\SappWsn\..\..\Components\zmac\ -I    #
#                          C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\..\..\Components\zmac\f8w\      #
#                          -Ohz --require_prototypes                          #
#    List file          =  C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\EndDeviceEB\List\SAPP_FrameWork #
#                          .lst                                               #
#    Object file        =  C:\Users\Administrator\Desktop\ZStack-CC2530-r200_ #
#                          1\Projects\SappWsn\EndDeviceEB\Obj\SAPP_FrameWork. #
#                          r51                                                #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Administrator\Desktop\ZStack-CC2530-r200_1\Projects\SappWsn\Source\SAPP_FrameWork.c
      1          #if defined(SAPP_ZSTACK)
      2          #include "SAPP_FrameWork.h"
      3          #include <string.h>
      4          
      5          /*********************************************************************
      6           * FUNCTIONS
      7           *********************************************************************/
      8          static void createEndPoint(struct ep_info_t *epInfo, uint8 *task_id, uint8 ep);
      9          #if defined(ZDO_COORDINATOR)
     10          static uint8 uartMsgProcesser(uint8 *msg);
     11          #endif
     12          
     13          /*********************************************************************
     14           * Local Variables
     15           *********************************************************************/
     16          //uint8 ctrlBuffer[sizeof(TOPOINFO) + sizeof(FUNCTABLE) + FUNC_NUM * sizeof(FUNCINFO)];

   \                                 In  segment XDATA_I, align 1, keep-with-next
     17          static TOPOINFO topoBuffer = { 0x02 };
   \                     topoBuffer:
   \   000000                DS 14
   \   00000E                REQUIRE `?<Initializer for topoBuffer>`
   \   00000E                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     18          FUNCTABLE *funcTableBuffer;// = (FUNCTABLE *)(&ctrlBuffer[sizeof(TOPOINFO)]);
   \                     funcTableBuffer:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
     19          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     20          static devStates_t curNwkState;
   \                     curNwkState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     21          static uint8 controlTaskId;
   \                     controlTaskId:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     22          static uint8 functionTaskId;
   \                     functionTaskId:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     23          static struct ep_info_t controlEndPointInfo;
   \                     controlEndPointInfo:
   \   000000                DS 33
   \   000021                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     24          static uint8 isUserTimerRunning = 0;
   \                     isUserTimerRunning:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
     25          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     26          void sapp_taskInitProcess(void)
   \                     sapp_taskInitProcess:
     27          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
     28           #if defined ( BUILD_ALL_DEVICES )
     29              // The "Demo" target is setup to have BUILD_ALL_DEVICES and HOLD_AUTO_START
     30              // We are looking at a jumper (defined in SampleAppHw.c) to be jumpered
     31              // together - if they are - we will start up a coordinator. Otherwise,
     32              // the device will start as a router.
     33              if ( readCoordinatorJumper() )
     34                  zgDeviceLogicalType = ZG_DEVICETYPE_COORDINATOR;
     35              else
     36                  zgDeviceLogicalType = ZG_DEVICETYPE_ROUTER;
     37          #endif // BUILD_ALL_DEVICES
     38          
     39          #if defined ( HOLD_AUTO_START )
     40              // HOLD_AUTO_START is a compile option that will surpress ZDApp
     41              //  from starting the device and wait for the application to
     42              //  start the device.
     43              ZDOInitDevice(0);
     44          #endif
     45          
     46              // 构造功能列表
     47              funcTableBuffer = createFuncTable(funcCount);
   \   000005                ; Setup parameters for call to function osal_mem_alloc
   \   000005   90....       MOV     DPTR,#funcCount
   \   000008   E0           MOVX    A,@DPTR
   \   000009   75F003       MOV     B,#0x3
   \   00000C   A4           MUL     AB
   \   00000D   2402         ADD     A,#0x2
   \   00000F   FA           MOV     R2,A
   \   000010   E5F0         MOV     A,B
   \   000012   3400         ADDC    A,#0x0
   \   000014   FB           MOV     R3,A
   \   000015   12....       LCALL   ??osal_mem_alloc?relay
   \   000018   90....       MOV     DPTR,#funcTableBuffer
   \   00001B   EA           MOV     A,R2
   \   00001C   F0           MOVX    @DPTR,A
   \   00001D   A3           INC     DPTR
   \   00001E   EB           MOV     A,R3
   \   00001F   F0           MOVX    @DPTR,A
     48              funcTableBuffer->ft_type = 0x01;
   \   000020   90....       MOV     DPTR,#funcTableBuffer
   \   000023   E0           MOVX    A,@DPTR
   \   000024   F8           MOV     R0,A
   \   000025   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_52:
   \   000028   7401         MOV     A,#0x1
   \   00002A   F0           MOVX    @DPTR,A
     49              funcTableBuffer->ft_count = funcCount;
   \   00002B   90....       MOV     DPTR,#funcCount
   \   00002E   E0           MOVX    A,@DPTR
   \   00002F   C0E0         PUSH    A
   \   000031   90....       MOV     DPTR,#funcTableBuffer
   \   000034   E0           MOVX    A,@DPTR
   \   000035   F8           MOV     R0,A
   \   000036   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_53:
   \   000039   A3           INC     DPTR
   \   00003A   D0E0         POP     A
   \   00003C   F0           MOVX    @DPTR,A
     50              int i;
     51              for(i = 0; i < funcCount; i++)
   \   00003D   7E00         MOV     R6,#0x0
   \   00003F   7F00         MOV     R7,#0x0
   \   000041   804D         SJMP    ??CrossCallReturnLabel_23
     52              {
     53                  funcTableBuffer->ft_list[i].type = funcList[i].function.type;
   \                     ??sapp_taskInitProcess_0:
   \   000043   12....       LCALL   ?Subroutine20 & 0xFFFF
     54                  funcTableBuffer->ft_list[i].id = funcList[i].function.id;
     55                  funcTableBuffer->ft_list[i].cycle = funcList[i].function.cycle;
     56              }
   \                     ??CrossCallReturnLabel_37:
   \   000046   F8           MOV     R0,A
   \   000047   74..         MOV     A,#(funcList >> 8) & 0xff
   \   000049   39           ADDC    A,R1
   \   00004A   F9           MOV     R1,A
   \   00004B   E8           MOV     A,R0
   \   00004C   FA           MOV     R2,A
   \   00004D   E9           MOV     A,R1
   \   00004E   FB           MOV     R3,A
   \   00004F   EE           MOV     A,R6
   \   000050   F8           MOV     R0,A
   \   000051   EF           MOV     A,R7
   \   000052   F9           MOV     R1,A
   \   000053   E8           MOV     A,R0
   \   000054   75F003       MOV     B,#0x3
   \   000057   A4           MUL     AB
   \   000058   F8           MOV     R0,A
   \   000059   ACF0         MOV     R4,B
   \   00005B   75F003       MOV     B,#0x3
   \   00005E   E9           MOV     A,R1
   \   00005F   A4           MUL     AB
   \   000060   2C           ADD     A,R4
   \   000061   F9           MOV     R1,A
   \   000062   8A82         MOV     DPL,R2
   \   000064   8B83         MOV     DPH,R3
   \   000066   A3           INC     DPTR
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   A3           INC     DPTR
   \   00006A   A3           INC     DPTR
   \   00006B   A3           INC     DPTR
   \   00006C   A3           INC     DPTR
   \   00006D   A3           INC     DPTR
   \   00006E   E0           MOVX    A,@DPTR
   \   00006F   C0E0         PUSH    A
   \   000071   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_10:
   \   000074   D0E0         POP     A
   \   000076   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   000079   E0           MOVX    A,@DPTR
   \   00007A   C0E0         PUSH    A
   \   00007C   12....       LCALL   ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_11:
   \   00007F   A3           INC     DPTR
   \   000080   D0E0         POP     A
   \   000082   12....       LCALL   ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000085   C0E0         PUSH    A
   \   000087   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00008A   D0E0         POP     A
   \   00008C   F0           MOVX    @DPTR,A
   \   00008D   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000090   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_0:
   \   000093   40AE         JC      ??sapp_taskInitProcess_0
     57              controlTaskId = tasksCnt - 2;
   \   000095   90....       MOV     DPTR,#tasksCnt
   \   000098   E0           MOVX    A,@DPTR
   \   000099   24FE         ADD     A,#-0x2
   \   00009B   90....       MOV     DPTR,#controlTaskId
   \   00009E   F0           MOVX    @DPTR,A
     58              functionTaskId = tasksCnt - 1;
   \   00009F   90....       MOV     DPTR,#tasksCnt
   \   0000A2   E0           MOVX    A,@DPTR
   \   0000A3   14           DEC     A
   \   0000A4   90....       MOV     DPTR,#functionTaskId
   \   0000A7   F0           MOVX    @DPTR,A
     59              HalIOInit(functionTaskId);
   \   0000A8                ; Setup parameters for call to function HalIOInit
   \   0000A8   F9           MOV     R1,A
   \   0000A9   12....       LCALL   ??HalIOInit?relay
     60              createEndPoint(&controlEndPointInfo, &controlTaskId, CONTROL_ENDPOINT);
   \   0000AC                ; Setup parameters for call to function createEndPoint
   \   0000AC   79F0         MOV     R1,#-0x10
   \   0000AE   7C..         MOV     R4,#controlTaskId & 0xff
   \   0000B0   7D..         MOV     R5,#(controlTaskId >> 8) & 0xff
   \   0000B2   7A..         MOV     R2,#controlEndPointInfo & 0xff
   \   0000B4   7B..         MOV     R3,#(controlEndPointInfo >> 8) & 0xff
   \   0000B6   12....       LCALL   ??createEndPoint?relay
     61              for(i = 0; i < funcCount; i++)
   \   0000B9   7E00         MOV     R6,#0x0
   \   0000BB   7F00         MOV     R7,#0x0
   \   0000BD   8036         SJMP    ??CrossCallReturnLabel_24
     62              {
     63                  struct ep_info_t *ep = &funcList[i];
   \                     ??sapp_taskInitProcess_1:
   \   0000BF   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   0000C2   F5..         MOV     ?V0 + 0,A
   \   0000C4   74..         MOV     A,#(funcList >> 8) & 0xff
   \   0000C6   39           ADDC    A,R1
   \   0000C7   F5..         MOV     ?V0 + 1,A
     64                  createEndPoint(ep, &functionTaskId, i + 1);
   \   0000C9                ; Setup parameters for call to function createEndPoint
   \   0000C9   EE           MOV     A,R6
   \   0000CA   04           INC     A
   \   0000CB   F9           MOV     R1,A
   \   0000CC   7C..         MOV     R4,#functionTaskId & 0xff
   \   0000CE   7D..         MOV     R5,#(functionTaskId >> 8) & 0xff
   \   0000D0   AA..         MOV     R2,?V0 + 0
   \   0000D2   AB..         MOV     R3,?V0 + 1
   \   0000D4   12....       LCALL   ??createEndPoint?relay
     65                  if(ep->res_available)
   \   0000D7   85..82       MOV     DPL,?V0 + 0
   \   0000DA   85..83       MOV     DPH,?V0 + 1
   \   0000DD   12....       LCALL   ??Subroutine29_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   0000E0   6010         JZ      ??sapp_taskInitProcess_2
     66                    (*ep->res_available)(ep, ResInit, NULL);
   \   0000E2                ; Setup parameters for indirect call
   \   0000E2   7C00         MOV     R4,#0x0
   \   0000E4   7D00         MOV     R5,#0x0
   \   0000E6   7901         MOV     R1,#0x1
   \   0000E8   AA..         MOV     R2,?V0 + 0
   \   0000EA   AB..         MOV     R3,?V0 + 1
   \   0000EC   12....       LCALL   ?Subroutine4 & 0xFFFF
     67              }
   \                     ??CrossCallReturnLabel_60:
   \   0000EF   12....       LCALL   ?CALL_IND
   \                     ??sapp_taskInitProcess_2:
   \   0000F2   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0000F5   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_1:
   \   0000F8   40C5         JC      ??sapp_taskInitProcess_1
     68          #if defined(ZDO_COORDINATOR)// || defined(RTR_NWK)
     69          //    RegisterForKeys( SampleApp_TaskID );
     70              MT_UartRegisterTaskID(controlTaskId);
     71          #endif
     72          }
   \   0000FA                REQUIRE ?Subroutine0
   \   0000FA                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   7F02         MOV     R7,#0x2
   \   000002   02....       LJMP    ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   EE           MOV     A,R6
   \   000001   F8           MOV     R0,A
   \   000002   EF           MOV     A,R7
   \   000003   F9           MOV     R1,A
   \   000004   E8           MOV     A,R0
   \   000005   75F021       MOV     B,#0x21
   \   000008   A4           MUL     AB
   \   000009   F8           MOV     R0,A
   \   00000A   AAF0         MOV     R2,B
   \   00000C   75F021       MOV     B,#0x21
   \   00000F   E9           MOV     A,R1
   \   000010                REQUIRE ??Subroutine25_0
   \   000010                ; // Fall through to label ??Subroutine25_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine25_0:
   \   000000   A4           MUL     AB
   \   000001   2A           ADD     A,R2
   \   000002   F9           MOV     R1,A
   \   000003   74..         MOV     A,#funcList & 0xff
   \   000005   28           ADD     A,R0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   90....       MOV     DPTR,#funcTableBuffer
   \   000003   E0           MOVX    A,@DPTR
   \   000004   28           ADD     A,R0
   \   000005   FC           MOV     R4,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   39           ADDC    A,R1
   \   000009   8C82         MOV     DPL,R4
   \   00000B   F583         MOV     DPH,A
   \   00000D   A3           INC     DPTR
   \   00000E   A3           INC     DPTR
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL   ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000003   A3           INC     DPTR
   \   000004   E0           MOVX    A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   F0           MOVX    @DPTR,A
   \   000001   8A82         MOV     DPL,R2
   \   000003   8B83         MOV     DPH,R3
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A   A3           INC     DPTR
   \   00000B   A3           INC     DPTR
   \   00000C   A3           INC     DPTR
   \   00000D   A3           INC     DPTR
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   EE           MOV     A,R6
   \   000001   2401         ADD     A,#0x1
   \   000003   0E           INC     R6
   \   000004   EF           MOV     A,R7
   \   000005   3400         ADDC    A,#0x0
   \   000007   FF           MOV     R7,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000003   A3           INC     DPTR
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   90....       MOV     DPTR,#funcTableBuffer
   \   000003   E0           MOVX    A,@DPTR
   \   000004   28           ADD     A,R0
   \   000005   FA           MOV     R2,A
   \   000006   A3           INC     DPTR
   \   000007   E0           MOVX    A,@DPTR
   \   000008   39           ADDC    A,R1
   \   000009   8A82         MOV     DPL,R2
   \   00000B   F583         MOV     DPH,A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006   A3           INC     DPTR
   \   000007   A3           INC     DPTR
   \   000008   A3           INC     DPTR
   \   000009   A3           INC     DPTR
   \   00000A                REQUIRE ??Subroutine27_0
   \   00000A                ; // Fall through to label ??Subroutine27_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine27_0:
   \   000000   A3           INC     DPTR
   \   000001   E0           MOVX    A,@DPTR
   \   000002   F583         MOV     DPH,A
   \   000004   8882         MOV     DPL,R0
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   90....       MOV     DPTR,#funcCount
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F8           MOV     R0,A
   \   000005   C3           CLR     C
   \   000006   EE           MOV     A,R6
   \   000007   98           SUBB    A,R0
   \   000008   EF           MOV     A,R7
   \   000009   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   9400         SUBB    A,#0x0
   \   000002   A2D2         MOV     C,0xD0 /* PSW */.2
   \   000004   65D0         XRL     A,PSW
   \   000006   33           RLC     A
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine29_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine30_0
   \   000002                ; // Fall through to label ??Subroutine30_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine30_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine31_0
   \   000002                ; // Fall through to label ??Subroutine31_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine31_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002                REQUIRE ??Subroutine32_0
   \   000002                ; // Fall through to label ??Subroutine32_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine32_0:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   F9           MOV     R1,A
   \   000005   E8           MOV     A,R0
   \   000006   49           ORL     A,R1
   \   000007   22           RET
     73          /*********************************************************************
     74           * LOCAL FUNCTIONS
     75           */
     76          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     77          static void createEndPoint(struct ep_info_t *epInfo, uint8 *task_id, uint8 ep)
   \                     createEndPoint:
     78          {
   \   000000   74F6         MOV     A,#-0xa
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
     79              static cId_t commonClusterId = SAPP_PERIODIC_CLUSTERID;
     80              // Fill out the endpoint description.
     81              epInfo->task_id = *task_id;
   \   000007   8C82         MOV     DPL,R4
   \   000009   8D83         MOV     DPH,R5
   \   00000B   E0           MOVX    A,@DPTR
   \   00000C   C0E0         PUSH    A
   \   00000E   EA           MOV     A,R2
   \   00000F   240C         ADD     A,#0xc
   \   000011   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000014   D0E0         POP     A
   \   000016   F0           MOVX    @DPTR,A
     82              epInfo->ep = ep;
   \   000017   EA           MOV     A,R2
   \   000018   240B         ADD     A,#0xb
   \   00001A   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   00001D   E9           MOV     A,R1
   \   00001E   12....       LCALL   ?Subroutine11 & 0xFFFF
     83              epInfo->timerTick = epInfo->function.cycle;
   \                     ??CrossCallReturnLabel_15:
   \   000021   C0E0         PUSH    A
   \   000023   EA           MOV     A,R2
   \   000024   240D         ADD     A,#0xd
   \   000026   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   000029   D0E0         POP     A
   \   00002B   F0           MOVX    @DPTR,A
     84              epInfo->userTimer = 0;
   \   00002C   12....       LCALL   ?Subroutine14 & 0xFFFF
     85          
     86              epInfo->simpleDesc.EndPoint = ep;
   \                     ??CrossCallReturnLabel_80:
   \   00002F   EA           MOV     A,R2
   \   000030   2415         ADD     A,#0x15
   \   000032   F5..         MOV     ?V0 + 0,A
   \   000034   EB           MOV     A,R3
   \   000035   3400         ADDC    A,#0x0
   \   000037   F5..         MOV     ?V0 + 1,A
   \   000039   EE           MOV     A,R6
   \   00003A   85..82       MOV     DPL,?V0 + 0
   \   00003D   85..83       MOV     DPH,?V0 + 1
   \   000040   F0           MOVX    @DPTR,A
     87              epInfo->simpleDesc.AppProfId = SAPP_PROFID;
   \   000041   EA           MOV     A,R2
   \   000042   2416         ADD     A,#0x16
   \   000044   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   000047   7408         MOV     A,#0x8
   \   000049   F0           MOVX    @DPTR,A
   \   00004A   A3           INC     DPTR
   \   00004B   740F         MOV     A,#0xf
   \   00004D   F0           MOVX    @DPTR,A
     88              epInfo->simpleDesc.AppDeviceId = SAPP_DEVICEID;
   \   00004E   EA           MOV     A,R2
   \   00004F   2418         ADD     A,#0x18
   \   000051   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   000054   7401         MOV     A,#0x1
   \   000056   F0           MOVX    @DPTR,A
   \   000057   A3           INC     DPTR
   \   000058   E4           CLR     A
   \   000059   F0           MOVX    @DPTR,A
     89              epInfo->simpleDesc.AppDevVer = SAPP_DEVICE_VERSION;
     90              epInfo->simpleDesc.Reserved = 0;
   \   00005A   EA           MOV     A,R2
   \   00005B   241A         ADD     A,#0x1a
   \   00005D   12....       LCALL   ??Subroutine36_0 & 0xFFFF
     91              epInfo->simpleDesc.AppNumInClusters = 1;
   \                     ??CrossCallReturnLabel_78:
   \   000060   EA           MOV     A,R2
   \   000061   241B         ADD     A,#0x1b
   \   000063   12....       LCALL   ?Subroutine16 & 0xFFFF
     92              epInfo->simpleDesc.pAppInClusterList = &commonClusterId;
   \                     ??CrossCallReturnLabel_21:
   \   000066   241C         ADD     A,#0x1c
   \   000068   12....       LCALL   ?Subroutine15 & 0xFFFF
     93              epInfo->simpleDesc.AppNumOutClusters = 1;
   \                     ??CrossCallReturnLabel_19:
   \   00006B   241E         ADD     A,#0x1e
   \   00006D   12....       LCALL   ?Subroutine16 & 0xFFFF
     94              epInfo->simpleDesc.pAppOutClusterList = &commonClusterId;
   \                     ??CrossCallReturnLabel_22:
   \   000070   241F         ADD     A,#0x1f
   \   000072   12....       LCALL   ?Subroutine15 & 0xFFFF
     95          
     96              epInfo->SampleApp_epDesc.endPoint = ep;
   \                     ??CrossCallReturnLabel_20:
   \   000075   240F         ADD     A,#0xf
   \   000077   F8           MOV     R0,A
   \   000078   EB           MOV     A,R3
   \   000079   3400         ADDC    A,#0x0
   \   00007B   F9           MOV     R1,A
   \   00007C   EE           MOV     A,R6
   \   00007D   8882         MOV     DPL,R0
   \   00007F   8983         MOV     DPH,R1
   \   000081   F0           MOVX    @DPTR,A
     97              epInfo->SampleApp_epDesc.task_id = task_id;
   \   000082   EA           MOV     A,R2
   \   000083   2410         ADD     A,#0x10
   \   000085   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   000088   EC           MOV     A,R4
   \   000089   F0           MOVX    @DPTR,A
   \   00008A   A3           INC     DPTR
   \   00008B   ED           MOV     A,R5
   \   00008C   F0           MOVX    @DPTR,A
     98              epInfo->SampleApp_epDesc.simpleDesc = &epInfo->simpleDesc;
   \   00008D   EA           MOV     A,R2
   \   00008E   2412         ADD     A,#0x12
   \   000090   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   000093   E5..         MOV     A,?V0 + 0
   \   000095   F0           MOVX    @DPTR,A
   \   000096   A3           INC     DPTR
   \   000097   E5..         MOV     A,?V0 + 1
   \   000099   F0           MOVX    @DPTR,A
     99              epInfo->SampleApp_epDesc.latencyReq = noLatencyReqs;
   \   00009A   EA           MOV     A,R2
   \   00009B   2414         ADD     A,#0x14
   \   00009D   12....       LCALL   ??Subroutine36_0 & 0xFFFF
    100          
    101              // Register the endpoint description with the AF
    102              afRegister(&epInfo->SampleApp_epDesc);
   \                     ??CrossCallReturnLabel_79:
   \   0000A0                ; Setup parameters for call to function afRegister
   \   0000A0   E8           MOV     A,R0
   \   0000A1   FA           MOV     R2,A
   \   0000A2   E9           MOV     A,R1
   \   0000A3   FB           MOV     R3,A
   \   0000A4   12....       LCALL   ??afRegister?relay
    103          }
   \   0000A7   02....       LJMP    ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   F582         MOV     DPL,A
   \   000002   EB           MOV     A,R3
   \   000003                REQUIRE ??Subroutine26_0
   \   000003                ; // Fall through to label ??Subroutine26_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine26_0:
   \   000000   12....       LCALL   ??Subroutine35_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   000003   7401         MOV     A,#0x1
   \   000005   F0           MOVX    @DPTR,A
   \   000006   EA           MOV     A,R2
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   74..         MOV     A,#??commonClusterId & 0xff
   \   000005   F0           MOVX    @DPTR,A
   \   000006   A3           INC     DPTR
   \   000007   74..         MOV     A,#(??commonClusterId >> 8) & 0xff
   \   000009   F0           MOVX    @DPTR,A
   \   00000A   EA           MOV     A,R2
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   F582         MOV     DPL,A
   \   000002   EB           MOV     A,R3
   \   000003                REQUIRE ??Subroutine35_0
   \   000003                ; // Fall through to label ??Subroutine35_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine35_0:
   \   000000   3400         ADDC    A,#0x0
   \   000002   F583         MOV     DPH,A
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   EA           MOV     A,R2
   \   000001   240E         ADD     A,#0xe
   \   000003                REQUIRE ??Subroutine36_0
   \   000003                ; // Fall through to label ??Subroutine36_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine36_0:
   \   000000   12....       LCALL   ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000003   E4           CLR     A
   \   000004   F0           MOVX    @DPTR,A
   \   000005   22           RET

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     ??commonClusterId:
   \   000000                DS 2
   \   000002                REQUIRE `?<Initializer for commonClusterId>`
   \   000002                REQUIRE __INIT_XDATA_I
    104          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    105          uint16 sapp_controlEpProcess(uint8 task_id, uint16 events)
   \                     sapp_controlEpProcess:
    106          {
   \   000000   74ED         MOV     A,#-0x13
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 19
   \   000005                ; Auto size: 3
   \   000005   74FD         MOV     A,#-0x3
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   89..         MOV     ?V0 + 4,R1
   \   00000C   8A..         MOV     ?V0 + 2,R2
   \   00000E   8B..         MOV     ?V0 + 3,R3
    107              afIncomingMSGPacket_t *MSGpkt;
    108          
    109              if ( events & SYS_EVENT_MSG )
   \   000010   EB           MOV     A,R3
   \   000011   5480         ANL     A,#0x80
   \   000013   7003         JNZ     $+5
   \   000015   02....       LJMP    ??sapp_controlEpProcess_0 & 0xFFFF
    110              {
    111                  MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive(task_id);
   \   000018                ; Setup parameters for call to function osal_msg_receive
   \   000018   02....       LJMP    ??sapp_controlEpProcess_1 & 0xFFFF
    112                  while ( MSGpkt )
    113                  {
    114                      switch ( MSGpkt->hdr.event )
    115                      {
    116          #if defined(ZDO_COORDINATOR)
    117                      case CMD_SERIAL_MSG:
    118          //                SampleApp_UartMessage((uint8 *)MSGpkt);
    119                          uartMsgProcesser((uint8 *)MSGpkt);
    120                          HalLedBlink( HAL_LED_1, 2, 50, 90 );
    121                          break;
    122          #endif
    123                          // Received when a messages is received (OTA) for this endpoint
    124                      case AF_INCOMING_MSG_CMD:
    125                      {
    126                          // TODO: QueryProfile or QueryTopo
    127                          switch(MSGpkt->clusterId)
    128                          {
    129                          case SAPP_PERIODIC_CLUSTERID:
    130                              switch(MSGpkt->cmd.Data[0])
    131                              {
    132                              case 0x01:
    133                                  // CtrlQueryProfile
    134                                  // 获取到数据包的来源地址来当做发送数据的目标
    135                                  SendData(CONTROL_ENDPOINT, funcTableBuffer->ft_data, MSGpkt->srcAddr.addr.shortAddr, MSGpkt->srcAddr.endPoint, sizeof(FUNCTABLE) + funcCount * sizeof(FUNCINFO));
    136                                  break;
    137                              case 0x02:
    138                                  // CtrlQueryTopo
    139                                  // 获取到数据包的来源地址来当做发送数据的目标
    140                                  SendData(CONTROL_ENDPOINT, (unsigned char *)&topoBuffer, MSGpkt->srcAddr.addr.shortAddr, MSGpkt->srcAddr.endPoint, sizeof(TOPOINFO));
    141                                  break;
    142                              case 0x03:
    143                                  // CtrlQuerySpecialFunction
    144                                  // cmd.Data[0] = 3, cmd.Data[1] = funcCode, cmd.Data[2] = funcID
    145                                  {
    146                                      uint8 i;
    147                                      for(i = 0; i < funcTableBuffer->ft_count; i++)
    148                                      {
    149                                          if((funcTableBuffer->ft_list[i].type == MSGpkt->cmd.Data[1])
    150                                             && (funcTableBuffer->ft_list[i].id == MSGpkt->cmd.Data[2]))
    151                                          {
    152                                              // 0x03, EndPoint, rCycle
    153                                              uint8 specialFunc[3] = { 0x03, i + 1, funcTableBuffer->ft_list[i].cycle };
    154                                              SendData(CONTROL_ENDPOINT, specialFunc, MSGpkt->srcAddr.addr.shortAddr, MSGpkt->srcAddr.endPoint, sizeof(specialFunc));
    155                                              break;
    156                                          }
    157                                      }
    158                                  }
    159                                  break;
    160                              default:
    161                                  {
    162                                      int i;
    163                                      for(i = 0; i < funcCount; i++)
    164                                      {
    165                                          struct ep_info_t *ep = &funcList[i];
    166                                          if(ep->res_available)   (*ep->res_available)(ep, ResControlPkg, MSGpkt);
    167                                      }
    168                                  }
    169                                  break;
    170                              }
    171                              HalLedBlink( HAL_LED_2, 1, 50, 250 );
    172                              break;
    173                          }
    174                          break;
    175                      }
    176                      // Received whenever the device changes state in the network
    177                      case ZDO_STATE_CHANGE:
    178                      {
    179                          devStates_t st = (devStates_t)(MSGpkt->hdr.status);
   \                     ??sapp_controlEpProcess_2:
   \   00001B   A3           INC     DPTR
   \   00001C   E0           MOVX    A,@DPTR
   \   00001D   F8           MOV     R0,A
    180                          if ( (st == DEV_ZB_COORD)
    181                                  || (st == DEV_ROUTER)
    182                                  || (st == DEV_END_DEVICE) )
   \   00001E   7409         MOV     A,#0x9
   \   000020   68           XRL     A,R0
   \   000021   600D         JZ      ??sapp_controlEpProcess_3
   \   000023   7407         MOV     A,#0x7
   \   000025   68           XRL     A,R0
   \   000026   6008         JZ      ??sapp_controlEpProcess_3
   \   000028   7406         MOV     A,#0x6
   \   00002A   68           XRL     A,R0
   \   00002B   6003         JZ      $+5
   \   00002D   02....       LJMP    ??sapp_controlEpProcess_4 & 0xFFFF
    183                          {
    184          //                    topoBuffer->type = 0x02;
    185                              memcpy(topoBuffer.IEEE, NLME_GetExtAddr(), 8);
   \                     ??sapp_controlEpProcess_3:
   \   000030                ; Setup parameters for call to function memcpy
   \   000030   75..08       MOV     ?V0 + 0,#0x8
   \   000033   75..00       MOV     ?V0 + 1,#0x0
   \   000036   78..         MOV     R0,#?V0 + 0
   \   000038   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00003B                ; Setup parameters for call to function NLME_GetExtAddr
   \   00003B   12....       LCALL   ??NLME_GetExtAddr?relay
   \   00003E   EA           MOV     A,R2
   \   00003F   FC           MOV     R4,A
   \   000040   EB           MOV     A,R3
   \   000041   FD           MOV     R5,A
   \   000042   7A..         MOV     R2,#(topoBuffer + 1) & 0xff
   \   000044   7B..         MOV     R3,#((topoBuffer + 1) >> 8) & 0xff
   \   000046   12....       LCALL   ??memcpy?relay
   \   000049   7402         MOV     A,#0x2
   \   00004B   12....       LCALL   ?DEALLOC_XSTACK8
    186          #if !defined(ZDO_COORDINATOR)
    187                              topoBuffer.PAddr = NLME_GetCoordShortAddr();
   \   00004E                ; Setup parameters for call to function NLME_GetCoordShortAddr
   \   00004E   12....       LCALL   ??NLME_GetCoordShortAddr?relay
   \   000051   90....       MOV     DPTR,#topoBuffer + 9
   \   000054   EA           MOV     A,R2
   \   000055   F0           MOVX    @DPTR,A
   \   000056   A3           INC     DPTR
   \   000057   EB           MOV     A,R3
   \   000058   F0           MOVX    @DPTR,A
    188          #else
    189                              topoBuffer.PAddr = 0xFFFF;
    190          #endif
    191                              osal_memcpy(&topoBuffer.panid, &_NIB.nwkPanId, sizeof(uint16));
   \   000059                ; Setup parameters for call to function osal_memcpy
   \   000059   75....       MOV     ?V0 + 8,#(_NIB + 33) & 0xff
   \   00005C   75....       MOV     ?V0 + 9,#((_NIB + 33) >> 8) & 0xff
   \   00005F   75..00       MOV     ?V0 + 10,#0x0
   \   000062   78..         MOV     R0,#?V0 + 8
   \   000064   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000067   7C02         MOV     R4,#0x2
   \   000069   7D00         MOV     R5,#0x0
   \   00006B   7A..         MOV     R2,#(topoBuffer + 11) & 0xff
   \   00006D   7B..         MOV     R3,#((topoBuffer + 11) >> 8) & 0xff
   \   00006F   12....       LCALL   ??osal_memcpy?relay
   \   000072   7403         MOV     A,#0x3
   \   000074   12....       LCALL   ?DEALLOC_XSTACK8
    192                              osal_memcpy(&topoBuffer.channel, &_NIB.nwkLogicalChannel, sizeof(uint8));
   \   000077                ; Setup parameters for call to function osal_memcpy
   \   000077   75....       MOV     ?V0 + 8,#(_NIB + 22) & 0xff
   \   00007A   75....       MOV     ?V0 + 9,#((_NIB + 22) >> 8) & 0xff
   \   00007D   78..         MOV     R0,#?V0 + 8
   \   00007F   12....       LCALL   ?PUSH_XSTACK_I_THREE
   \   000082   7C01         MOV     R4,#0x1
   \   000084   7D00         MOV     R5,#0x0
   \   000086   7A..         MOV     R2,#(topoBuffer + 13) & 0xff
   \   000088   7B..         MOV     R3,#((topoBuffer + 13) >> 8) & 0xff
   \   00008A   12....       LCALL   ??osal_memcpy?relay
   \   00008D   7403         MOV     A,#0x3
   \   00008F   12....       LCALL   ?DEALLOC_XSTACK8
    193                              //向协调器发送拓扑信息
    194                              SendData(CONTROL_ENDPOINT, (unsigned char *)&topoBuffer, 0x0000, TRANSFER_ENDPOINT, sizeof(TOPOINFO));
   \   000092                ; Setup parameters for call to function SendData
   \   000092   75..0E       MOV     ?V0 + 0,#0xe
   \   000095   78..         MOV     R0,#?V0 + 0
   \   000097   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00009A   75..01       MOV     ?V0 + 0,#0x1
   \   00009D   78..         MOV     R0,#?V0 + 0
   \   00009F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0000A2   7C00         MOV     R4,#0x0
   \   0000A4   7D00         MOV     R5,#0x0
   \   0000A6   7A..         MOV     R2,#topoBuffer & 0xff
   \   0000A8   7B..         MOV     R3,#(topoBuffer >> 8) & 0xff
   \   0000AA   79F0         MOV     R1,#-0x10
   \   0000AC   12....       LCALL   ??SendData?relay
   \   0000AF   7402         MOV     A,#0x2
   \   0000B1   12....       LCALL   ?DEALLOC_XSTACK8
    195                              HalLedBlink( HAL_LED_2, 4, 50, 250 );
   \   0000B4                ; Setup parameters for call to function HalLedBlink
   \   0000B4   7CFA         MOV     R4,#-0x6
   \   0000B6   7D00         MOV     R5,#0x0
   \   0000B8   7B32         MOV     R3,#0x32
   \   0000BA   7A04         MOV     R2,#0x4
   \                     ??sapp_controlEpProcess_5:
   \   0000BC   7902         MOV     R1,#0x2
   \   0000BE   12....       LCALL   ??HalLedBlink?relay
    196                          }
    197                      }
    198                      break;
    199                      default:
    200                          break;
    201                      }
    202                      // Release the memory
    203                      osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??sapp_controlEpProcess_4:
   \   0000C1                ; Setup parameters for call to function osal_msg_deallocate
   \   0000C1   EE           MOV     A,R6
   \   0000C2   FA           MOV     R2,A
   \   0000C3   EF           MOV     A,R7
   \   0000C4   FB           MOV     R3,A
   \   0000C5   12....       LCALL   ??osal_msg_deallocate?relay
    204                      // Next - if one is available
    205                      MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( task_id );
   \   0000C8                ; Setup parameters for call to function osal_msg_receive
   \   0000C8   A9..         MOV     R1,?V0 + 4
   \                     ??sapp_controlEpProcess_1:
   \   0000CA   12....       LCALL   ??osal_msg_receive?relay
   \   0000CD   8A..         MOV     ?V0 + 0,R2
   \   0000CF   8B..         MOV     ?V0 + 1,R3
   \   0000D1   AE..         MOV     R6,?V0 + 0
   \   0000D3   AF..         MOV     R7,?V0 + 1
   \   0000D5   EE           MOV     A,R6
   \   0000D6   4F           ORL     A,R7
   \   0000D7   7003         JNZ     $+5
   \   0000D9   02....       LJMP    ??sapp_controlEpProcess_6 & 0xFFFF
   \   0000DC   8E82         MOV     DPL,R6
   \   0000DE   8F83         MOV     DPH,R7
   \   0000E0   E0           MOVX    A,@DPTR
   \   0000E1   24E6         ADD     A,#-0x1a
   \   0000E3   6009         JZ      ??sapp_controlEpProcess_7
   \   0000E5   2449         ADD     A,#0x49
   \   0000E7   7003         JNZ     $+5
   \   0000E9   02....       LJMP    ??sapp_controlEpProcess_2 & 0xFFFF
   \   0000EC   80D3         SJMP    ??sapp_controlEpProcess_4
   \                     ??sapp_controlEpProcess_7:
   \   0000EE   A3           INC     DPTR
   \   0000EF   A3           INC     DPTR
   \   0000F0   A3           INC     DPTR
   \   0000F1   A3           INC     DPTR
   \   0000F2   E0           MOVX    A,@DPTR
   \   0000F3   6401         XRL     A,#0x1
   \   0000F5   7002         JNZ     ??sapp_controlEpProcess_8
   \   0000F7   A3           INC     DPTR
   \   0000F8   E0           MOVX    A,@DPTR
   \                     ??sapp_controlEpProcess_8:
   \   0000F9   70C6         JNZ     ??sapp_controlEpProcess_4
   \   0000FB   EE           MOV     A,R6
   \   0000FC   2422         ADD     A,#0x22
   \   0000FE   F582         MOV     DPL,A
   \   000100   EF           MOV     A,R7
   \   000101   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_72:
   \   000104   F8           MOV     R0,A
   \   000105   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_54:
   \   000108   E0           MOVX    A,@DPTR
   \   000109   14           DEC     A
   \   00010A   6009         JZ      ??sapp_controlEpProcess_9
   \   00010C   14           DEC     A
   \   00010D   6035         JZ      ??sapp_controlEpProcess_10
   \   00010F   14           DEC     A
   \   000110   6049         JZ      ??sapp_controlEpProcess_11
   \   000112   02....       LJMP    ??sapp_controlEpProcess_12 & 0xFFFF
   \                     ??sapp_controlEpProcess_9:
   \   000115                ; Setup parameters for call to function SendData
   \   000115   75F003       MOV     B,#0x3
   \   000118   90....       MOV     DPTR,#funcCount
   \   00011B   E0           MOVX    A,@DPTR
   \   00011C   A4           MUL     AB
   \   00011D   2402         ADD     A,#0x2
   \   00011F   F5..         MOV     ?V0 + 0,A
   \   000121   78..         MOV     R0,#?V0 + 0
   \   000123   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000126   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000129   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00012C   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   00012F   90....       MOV     DPTR,#funcTableBuffer
   \   000132   E0           MOVX    A,@DPTR
   \   000133   FA           MOV     R2,A
   \   000134   A3           INC     DPTR
   \   000135   E0           MOVX    A,@DPTR
   \   000136   FB           MOV     R3,A
   \                     ??sapp_controlEpProcess_13:
   \   000137   79F0         MOV     R1,#-0x10
   \   000139   12....       LCALL   ??SendData?relay
   \   00013C   7402         MOV     A,#0x2
   \   00013E   12....       LCALL   ?DEALLOC_XSTACK8
   \   000141   02....       LJMP    ??sapp_controlEpProcess_14 & 0xFFFF
   \                     ??sapp_controlEpProcess_10:
   \   000144                ; Setup parameters for call to function SendData
   \   000144   75..0E       MOV     ?V0 + 0,#0xe
   \   000147   78..         MOV     R0,#?V0 + 0
   \   000149   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   00014C   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   00014F   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000152   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000155   7A..         MOV     R2,#topoBuffer & 0xff
   \   000157   7B..         MOV     R3,#(topoBuffer >> 8) & 0xff
   \   000159   80DC         SJMP    ??sapp_controlEpProcess_13
   \                     ??sapp_controlEpProcess_11:
   \   00015B   7B00         MOV     R3,#0x0
   \   00015D   8001         SJMP    ??sapp_controlEpProcess_15
   \                     ??sapp_controlEpProcess_16:
   \   00015F   0B           INC     R3
   \                     ??sapp_controlEpProcess_15:
   \   000160   90....       MOV     DPTR,#funcTableBuffer
   \   000163   E0           MOVX    A,@DPTR
   \   000164   F8           MOV     R0,A
   \   000165   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_55:
   \   000168   A3           INC     DPTR
   \   000169   E0           MOVX    A,@DPTR
   \   00016A   F8           MOV     R0,A
   \   00016B   EB           MOV     A,R3
   \   00016C   C3           CLR     C
   \   00016D   98           SUBB    A,R0
   \   00016E   4003         JC      $+5
   \   000170   02....       LJMP    ??sapp_controlEpProcess_14 & 0xFFFF
   \   000173   EB           MOV     A,R3
   \   000174   75F003       MOV     B,#0x3
   \   000177   A4           MUL     AB
   \   000178   F8           MOV     R0,A
   \   000179   A9F0         MOV     R1,B
   \   00017B   12....       LCALL   ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   00017E   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   000181   E0           MOVX    A,@DPTR
   \   000182   68           XRL     A,R0
   \   000183   70DA         JNZ     ??sapp_controlEpProcess_16
   \   000185   EB           MOV     A,R3
   \   000186   75F003       MOV     B,#0x3
   \   000189   A4           MUL     AB
   \   00018A   F8           MOV     R0,A
   \   00018B   A9F0         MOV     R1,B
   \   00018D   90....       MOV     DPTR,#funcTableBuffer
   \   000190   E0           MOVX    A,@DPTR
   \   000191   28           ADD     A,R0
   \   000192   A3           INC     DPTR
   \   000193   E0           MOVX    A,@DPTR
   \   000194   39           ADDC    A,R1
   \   000195   8A82         MOV     DPL,R2
   \   000197   F583         MOV     DPH,A
   \   000199   A3           INC     DPTR
   \   00019A   12....       LCALL   ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   00019D   A3           INC     DPTR
   \   00019E   E0           MOVX    A,@DPTR
   \   00019F   68           XRL     A,R0
   \   0001A0   70BD         JNZ     ??sapp_controlEpProcess_16
   \   0001A2   85..82       MOV     DPL,?XSP + 0
   \   0001A5   85..83       MOV     DPH,?XSP + 1
   \   0001A8   AC82         MOV     R4,DPL
   \   0001AA   AD83         MOV     R5,DPH
   \   0001AC   7583..       MOV     DPH,#(`?<Constant {3, 0, 0}>` >> 8) & 0xff
   \   0001AF   7582..       MOV     DPL,#`?<Constant {3, 0, 0}>` & 0xff
   \   0001B2   7403         MOV     A,#0x3
   \   0001B4   12....       LCALL   ?MOVE_LONG8_XDATA_XDATA
   \   0001B7   04           INC     A
   \   0001B8   2B           ADD     A,R3
   \   0001B9   C0E0         PUSH    A
   \   0001BB   7401         MOV     A,#0x1
   \   0001BD   12....       LCALL   ?XSTACK_DISP0_8
   \   0001C0   D0E0         POP     A
   \   0001C2   F0           MOVX    @DPTR,A
   \   0001C3   EB           MOV     A,R3
   \   0001C4   75F003       MOV     B,#0x3
   \   0001C7   A4           MUL     AB
   \   0001C8   F8           MOV     R0,A
   \   0001C9   A9F0         MOV     R1,B
   \   0001CB   12....       LCALL   ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   0001CE   E0           MOVX    A,@DPTR
   \   0001CF   C0E0         PUSH    A
   \   0001D1   7402         MOV     A,#0x2
   \   0001D3   12....       LCALL   ?XSTACK_DISP0_8
   \   0001D6   D0E0         POP     A
   \   0001D8   F0           MOVX    @DPTR,A
   \   0001D9                ; Setup parameters for call to function SendData
   \   0001D9   75..03       MOV     ?V0 + 0,#0x3
   \   0001DC   78..         MOV     R0,#?V0 + 0
   \   0001DE   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001E1   12....       LCALL   ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0001E4   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   0001E7   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   0001EA   7402         MOV     A,#0x2
   \   0001EC   12....       LCALL   ?XSTACK_DISP0_8
   \   0001EF   AA82         MOV     R2,DPL
   \   0001F1   AB83         MOV     R3,DPH
   \   0001F3   02....       LJMP    ??sapp_controlEpProcess_13 & 0xFFFF
   \                     ??sapp_controlEpProcess_12:
   \   0001F6   75..00       MOV     ?V0 + 0,#0x0
   \   0001F9   75..00       MOV     ?V0 + 1,#0x0
   \   0001FC   802E         SJMP    ??sapp_controlEpProcess_17
   \                     ??sapp_controlEpProcess_18:
   \   0001FE   E5..         MOV     A,?V0 + 0
   \   000200   75F021       MOV     B,#0x21
   \   000203   A4           MUL     AB
   \   000204   F8           MOV     R0,A
   \   000205   AAF0         MOV     R2,B
   \   000207   75F021       MOV     B,#0x21
   \   00020A   E5..         MOV     A,?V0 + 1
   \   00020C   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00020F   12....       LCALL   ?Subroutine2 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000212   600C         JZ      ??sapp_controlEpProcess_19
   \   000214                ; Setup parameters for indirect call
   \   000214   EE           MOV     A,R6
   \   000215   FC           MOV     R4,A
   \   000216   EF           MOV     A,R7
   \   000217   FD           MOV     R5,A
   \   000218   7904         MOV     R1,#0x4
   \   00021A   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   00021D   12....       LCALL   ?CALL_IND
   \                     ??sapp_controlEpProcess_19:
   \   000220   E5..         MOV     A,?V0 + 0
   \   000222   2401         ADD     A,#0x1
   \   000224   F5..         MOV     ?V0 + 0,A
   \   000226   E5..         MOV     A,?V0 + 1
   \   000228   3400         ADDC    A,#0x0
   \   00022A   F5..         MOV     ?V0 + 1,A
   \                     ??sapp_controlEpProcess_17:
   \   00022C   90....       MOV     DPTR,#funcCount
   \   00022F   E0           MOVX    A,@DPTR
   \   000230   F8           MOV     R0,A
   \   000231   C3           CLR     C
   \   000232   E5..         MOV     A,?V0 + 0
   \   000234   98           SUBB    A,R0
   \   000235   E5..         MOV     A,?V0 + 1
   \   000237   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   00023A   40C2         JC      ??sapp_controlEpProcess_18
   \                     ??sapp_controlEpProcess_14:
   \   00023C                ; Setup parameters for call to function HalLedBlink
   \   00023C   7CFA         MOV     R4,#-0x6
   \   00023E   7D00         MOV     R5,#0x0
   \   000240   7B32         MOV     R3,#0x32
   \   000242   7A01         MOV     R2,#0x1
   \   000244   02....       LJMP    ??sapp_controlEpProcess_5 & 0xFFFF
    206                  }
    207                  // return unprocessed events
    208                  return (events ^ SYS_EVENT_MSG);
   \                     ??sapp_controlEpProcess_6:
   \   000247   AA..         MOV     R2,?V0 + 2
   \   000249   E5..         MOV     A,?V0 + 3
   \   00024B   6480         XRL     A,#0x80
   \   00024D   FB           MOV     R3,A
   \   00024E   02....       LJMP    ??sapp_controlEpProcess_20 & 0xFFFF
    209              }
    210              // 定时器时间到, 遍历所有端点看是否有userTimer
    211              if(events & SAPP_SEND_PERIODIC_MSG_EVT)
   \                     ??sapp_controlEpProcess_0:
   \   000251   EA           MOV     A,R2
   \   000252   A2E0         MOV     C,0xE0 /* A   */.0
   \   000254   4003         JC      $+5
   \   000256   02....       LJMP    ??sapp_controlEpProcess_21 & 0xFFFF
    212              {
    213                  int i;
    214                  uint8 hasUserTimer = 0;
   \   000259   75..00       MOV     ?V0 + 0,#0x0
    215                  for(i = 0; i < funcCount; i++)
   \   00025C   7E00         MOV     R6,#0x0
   \   00025E   7F00         MOV     R7,#0x0
   \   000260   8047         SJMP    ??CrossCallReturnLabel_25
    216                  {
    217                      struct ep_info_t *ep = &funcList[i];
   \                     ??sapp_controlEpProcess_22:
   \   000262   EE           MOV     A,R6
   \   000263   F8           MOV     R0,A
   \   000264   EF           MOV     A,R7
   \   000265   F9           MOV     R1,A
   \   000266   E8           MOV     A,R0
   \   000267   75F021       MOV     B,#0x21
   \   00026A   A4           MUL     AB
   \   00026B   F8           MOV     R0,A
   \   00026C   AAF0         MOV     R2,B
   \   00026E   75F021       MOV     B,#0x21
   \   000271   E9           MOV     A,R1
   \   000272   12....       LCALL   ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000275   39           ADDC    A,R1
   \   000276   FB           MOV     R3,A
    218                      if(ep->userTimer && ep->res_available)
   \   000277   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_76:
   \   00027A   602A         JZ      ??sapp_controlEpProcess_23
   \   00027C   12....       LCALL   ??Subroutine28_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   00027F   6025         JZ      ??sapp_controlEpProcess_23
    219                      {
    220                          hasUserTimer = 1;
   \   000281   75..01       MOV     ?V0 + 0,#0x1
    221                          ep->userTimer = ep->userTimer - 1;
   \   000284   12....       LCALL   ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_77:
   \   000287   14           DEC     A
   \   000288   F0           MOVX    @DPTR,A
    222                          if(ep->userTimer <= 1)
   \   000289   C3           CLR     C
   \   00028A   9402         SUBB    A,#0x2
   \   00028C   5018         JNC     ??sapp_controlEpProcess_23
    223                          {
    224                              ep->userTimer = 0;
   \   00028E   E4           CLR     A
   \   00028F   F0           MOVX    @DPTR,A
    225                              (*ep->res_available)(ep, ResUserTimer, NULL);
   \   000290                ; Setup parameters for indirect call
   \   000290   FC           MOV     R4,A
   \   000291   FD           MOV     R5,A
   \   000292   7903         MOV     R1,#0x3
   \   000294   8A82         MOV     DPL,R2
   \   000296   8B83         MOV     DPH,R3
   \   000298   A3           INC     DPTR
   \   000299   A3           INC     DPTR
   \   00029A   A3           INC     DPTR
   \   00029B   A3           INC     DPTR
   \   00029C   A3           INC     DPTR
   \   00029D   A3           INC     DPTR
   \   00029E   E0           MOVX    A,@DPTR
   \   00029F   F8           MOV     R0,A
   \   0002A0   12....       LCALL   ??Subroutine27_0 & 0xFFFF
    226                          }
    227                      }
    228                  }
   \                     ??CrossCallReturnLabel_56:
   \   0002A3   12....       LCALL   ?CALL_IND
   \                     ??sapp_controlEpProcess_23:
   \   0002A6   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   0002A9   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_2:
   \   0002AC   40B4         JC      ??sapp_controlEpProcess_22
    229                  if(hasUserTimer)
   \   0002AE   E5..         MOV     A,?V0 + 0
   \   0002B0   A2E0         MOV     C,0xE0 /* A   */.0
   \   0002B2   500F         JNC     ??sapp_controlEpProcess_24
    230                  {
    231                      // 重新启动定时器
    232                      osal_start_timerEx(task_id, SAPP_SEND_PERIODIC_MSG_EVT, 1000);
   \   0002B4                ; Setup parameters for call to function osal_start_timerEx
   \   0002B4   7CE8         MOV     R4,#-0x18
   \   0002B6   7D03         MOV     R5,#0x3
   \   0002B8   7A01         MOV     R2,#0x1
   \   0002BA   7B00         MOV     R3,#0x0
   \   0002BC   A9..         MOV     R1,?V0 + 4
   \   0002BE   12....       LCALL   ??osal_start_timerEx?relay
   \   0002C1   800D         SJMP    ??sapp_controlEpProcess_25
    233                  }
    234                  else
    235                  {
    236                      isUserTimerRunning = 0;
   \                     ??sapp_controlEpProcess_24:
   \   0002C3   90....       MOV     DPTR,#isUserTimerRunning
   \   0002C6   E4           CLR     A
   \   0002C7   F0           MOVX    @DPTR,A
    237                      osal_stop_timerEx(task_id, SAPP_SEND_PERIODIC_MSG_EVT);
   \   0002C8                ; Setup parameters for call to function osal_stop_timerEx
   \   0002C8   7A01         MOV     R2,#0x1
   \   0002CA   FB           MOV     R3,A
   \   0002CB   A9..         MOV     R1,?V0 + 4
   \   0002CD   12....       LCALL   ??osal_stop_timerEx?relay
    238                  }
    239                  // return unprocessed events
    240                  return (events ^ SAPP_SEND_PERIODIC_MSG_EVT);
   \                     ??sapp_controlEpProcess_25:
   \   0002D0   E5..         MOV     A,?V0 + 2
   \   0002D2   6401         XRL     A,#0x1
   \   0002D4   FA           MOV     R2,A
   \   0002D5   AB..         MOV     R3,?V0 + 3
   \   0002D7   8004         SJMP    ??sapp_controlEpProcess_20
    241              }
    242              // Discard unknown events
    243              return 0;
   \                     ??sapp_controlEpProcess_21:
   \   0002D9   7A00         MOV     R2,#0x0
   \   0002DB   7B00         MOV     R3,#0x0
   \                     ??sapp_controlEpProcess_20:
   \   0002DD   7403         MOV     A,#0x3
   \   0002DF   12....       LCALL   ?DEALLOC_XSTACK8
   \   0002E2   7F0B         MOV     R7,#0xb
   \   0002E4   02....       LJMP    ?BANKED_LEAVE_XDATA
    244          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   A4           MUL     AB
   \   000001   2A           ADD     A,R2
   \   000002   F9           MOV     R1,A
   \   000003   74..         MOV     A,#funcList & 0xff
   \   000005   28           ADD     A,R0
   \   000006   FA           MOV     R2,A
   \   000007   74..         MOV     A,#(funcList >> 8) & 0xff
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   EE           MOV     A,R6
   \   000001   240F         ADD     A,#0xf
   \   000003   F582         MOV     DPL,A
   \   000005   EF           MOV     A,R7
   \   000006   12....       LCALL   ??Subroutine35_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   000009   E0           MOVX    A,@DPTR
   \   00000A   F5..         MOV     ?V0 + 0,A
   \   00000C   78..         MOV     R0,#?V0 + 0
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   E0           MOVX    A,@DPTR
   \   000003   F8           MOV     R0,A
   \   000004   EE           MOV     A,R6
   \   000005   2422         ADD     A,#0x22
   \   000007   F582         MOV     DPL,A
   \   000009   EF           MOV     A,R7
   \   00000A   12....       LCALL   ??Subroutine35_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   00000D   E0           MOVX    A,@DPTR
   \   00000E   F9           MOV     R1,A
   \   00000F   A3           INC     DPTR
   \   000010   E0           MOVX    A,@DPTR
   \   000011   F583         MOV     DPH,A
   \   000013   8982         MOV     DPL,R1
   \   000015   A3           INC     DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   39           ADDC    A,R1
   \   000001   FB           MOV     R3,A
   \   000002                REQUIRE ??Subroutine28_0
   \   000002                ; // Fall through to label ??Subroutine28_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine28_0:
   \   000000   8A82         MOV     DPL,R2
   \   000002   8B83         MOV     DPH,R3
   \   000004                REQUIRE ??Subroutine29_0
   \   000004                ; // Fall through to label ??Subroutine29_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   EA           MOV     A,R2
   \   000001   240E         ADD     A,#0xe
   \   000003                REQUIRE ??Subroutine33_0
   \   000003                ; // Fall through to label ??Subroutine33_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine33_0:
   \   000000   F582         MOV     DPL,A
   \   000002   EB           MOV     A,R3
   \   000003                REQUIRE ??Subroutine34_0
   \   000003                ; // Fall through to label ??Subroutine34_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine34_0:
   \   000000   12....       LCALL   ??Subroutine35_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   000003   E0           MOVX    A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   8E82         MOV     DPL,R6
   \   000002   8F83         MOV     DPH,R7
   \   000004   A3           INC     DPTR
   \   000005   A3           INC     DPTR
   \   000006                REQUIRE ??Subroutine37_0
   \   000006                ; // Fall through to label ??Subroutine37_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine37_0:
   \   000000   A3           INC     DPTR
   \   000001                REQUIRE ??Subroutine38_0
   \   000001                ; // Fall through to label ??Subroutine38_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine38_0:
   \   000000   A3           INC     DPTR
   \   000001   A3           INC     DPTR
   \   000002   A3           INC     DPTR
   \   000003   E0           MOVX    A,@DPTR
   \   000004   FC           MOV     R4,A
   \   000005   A3           INC     DPTR
   \   000006   E0           MOVX    A,@DPTR
   \   000007   FD           MOV     R5,A
   \   000008   22           RET
    245          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    246          uint16 sapp_functionEpProcess(uint8 task_id, uint16 events)
   \                     sapp_functionEpProcess:
    247          {
   \   000000   74EF         MOV     A,#-0x11
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 17
   \   000005                ; Auto size: 0
   \   000005   89..         MOV     ?V0 + 8,R1
   \   000007   8A..         MOV     ?V0 + 0,R2
   \   000009   8B..         MOV     ?V0 + 1,R3
    248              afIncomingMSGPacket_t *MSGpkt;
    249              if(events & SYS_EVENT_MSG)
   \   00000B   EB           MOV     A,R3
   \   00000C   5480         ANL     A,#0x80
   \   00000E   7003         JNZ     $+5
   \   000010   02....       LJMP    ??sapp_functionEpProcess_0 & 0xFFFF
    250              {
    251                  MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( task_id );
   \   000013                ; Setup parameters for call to function osal_msg_receive
   \   000013   802D         SJMP    ??sapp_functionEpProcess_1
    252                  while ( MSGpkt )
    253                  {
    254                      switch ( MSGpkt->hdr.event )
    255                      {
    256                      // 接收到数据包
    257                      case AF_INCOMING_MSG_CMD:
    258                          {
    259                              switch ( MSGpkt->clusterId )
    260                              {
    261                              case SAPP_PERIODIC_CLUSTERID:
    262                                  if(MSGpkt->endPoint <= funcCount)
    263                                  {
    264                                      struct ep_info_t *ep = &funcList[MSGpkt->endPoint - 1];
    265                                      if(ep->incoming_data)
    266                                          (*ep->incoming_data)(ep, MSGpkt->srcAddr.addr.shortAddr, MSGpkt->srcAddr.endPoint, &MSGpkt->cmd);
    267                                  }
    268                                  HalLedBlink( HAL_LED_2, 1, 50, 250 );
    269                                  break;
    270                              }
    271                          }
    272                          break;
    273          
    274                      case ZDO_STATE_CHANGE:
    275                          {
    276                              curNwkState = (devStates_t)(MSGpkt->hdr.status);
    277                              if ( (curNwkState == DEV_ZB_COORD)
    278                                      || (curNwkState == DEV_ROUTER)
    279                                      || (curNwkState == DEV_END_DEVICE) )
    280                              {
    281                                  int i;
    282                                  int hasTimeOut = 0;
    283                                  for(i = 0; i < funcCount; i++)
    284                                  {
    285                                      struct ep_info_t *ep = &funcList[i];
    286                                      if(ep->nwk_stat_change)
    287                                          (*ep->nwk_stat_change)(ep);
    288                                      // 重置端点计数器
    289                                      if(ep->time_out && ep->function.cycle)
    290                                      {
    291                                          ep->timerTick = ep->function.cycle;
    292                                          hasTimeOut = 1;
    293                                      }
    294                                  }
    295                                  if(hasTimeOut)
    296                                  {
    297                                      // 加入网络成功,启动定时器,为各个端点提供定时
    298                                      osal_start_timerEx(task_id,
    299                                                         SAPP_SEND_PERIODIC_MSG_EVT,
    300                                                         1000);
    301                                  }
    302                              }
    303                              else
    304                                  osal_stop_timerEx(task_id, SAPP_SEND_PERIODIC_MSG_EVT);
    305                          }
    306                          break;
    307                      case IOPORT_INT_EVENT:
    308                        {
    309                          OSALIOIntData_t* IOIntData;
    310                          IOIntData =(OSALIOIntData_t*)MSGpkt;
    311                          if(IOIntData->endPoint <= funcCount)
   \                     ??sapp_functionEpProcess_2:
   \   000015   A3           INC     DPTR
   \   000016   A3           INC     DPTR
   \   000017   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_12:
   \   00001A   401D         JC      ??sapp_functionEpProcess_3
    312                          {
    313                              struct ep_info_t *ep = &funcList[IOIntData->endPoint - 1];
   \   00001C   8E82         MOV     DPL,R6
   \   00001E   8F83         MOV     DPH,R7
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_8:
   \   000025   12....       LCALL   ?Subroutine2 & 0xFFFF
    314                              if(ep->res_available)
   \                     ??CrossCallReturnLabel_64:
   \   000028   600F         JZ      ??sapp_functionEpProcess_3
    315                                  (*ep->res_available)(ep, ResIOInt, IOIntData->arg);
   \   00002A                ; Setup parameters for indirect call
   \   00002A   8E82         MOV     DPL,R6
   \   00002C   8F83         MOV     DPH,R7
   \   00002E   12....       LCALL   ??Subroutine38_0 & 0xFFFF
    316                          }
    317                        }
   \                     ??CrossCallReturnLabel_89:
   \   000031   7905         MOV     R1,#0x5
   \   000033   12....       LCALL   ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000036   12....       LCALL   ?CALL_IND
    318                        break;
    319          #if defined(HAL_IRDEC) && (HAL_IRDEC == TRUE)
    320                      case IRDEC_INT_EVENT:   //
    321                        {
    322                          OSALIRDecIntData_t* TimerIntData = (OSALIRDecIntData_t*)MSGpkt;
    323                          if(TimerIntData->endPoint <= funcCount)
    324                          {
    325                              struct ep_info_t *ep = &funcList[TimerIntData->endPoint - 1];
    326                              if(ep->res_available)
    327                                  (*ep->res_available)(ep, ResTimerInt, TimerIntData->data);
    328                          }
    329                        }
    330                        break;
    331          #endif
    332                      default:
    333                          break;
    334                      }
    335                      // Release the memory
    336                      osal_msg_deallocate( (uint8 *)MSGpkt );
   \                     ??sapp_functionEpProcess_3:
   \   000039                ; Setup parameters for call to function osal_msg_deallocate
   \   000039   EE           MOV     A,R6
   \   00003A   FA           MOV     R2,A
   \   00003B   EF           MOV     A,R7
   \   00003C   FB           MOV     R3,A
   \   00003D   12....       LCALL   ??osal_msg_deallocate?relay
    337                      // Next - if one is available
    338                      MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( task_id );
   \   000040                ; Setup parameters for call to function osal_msg_receive
   \   000040   A9..         MOV     R1,?V0 + 8
   \                     ??sapp_functionEpProcess_1:
   \   000042   12....       LCALL   ??osal_msg_receive?relay
   \   000045   8A..         MOV     ?V0 + 2,R2
   \   000047   8B..         MOV     ?V0 + 3,R3
   \   000049   AE..         MOV     R6,?V0 + 2
   \   00004B   AF..         MOV     R7,?V0 + 3
   \   00004D   EE           MOV     A,R6
   \   00004E   4F           ORL     A,R7
   \   00004F   7003         JNZ     $+5
   \   000051   02....       LJMP    ??sapp_functionEpProcess_4 & 0xFFFF
   \   000054   8E82         MOV     DPL,R6
   \   000056   8F83         MOV     DPH,R7
   \   000058   E0           MOVX    A,@DPTR
   \   000059   24E6         ADD     A,#-0x1a
   \   00005B   600A         JZ      ??sapp_functionEpProcess_5
   \   00005D   2449         ADD     A,#0x49
   \   00005F   6077         JZ      ??sapp_functionEpProcess_6
   \   000061   24E1         ADD     A,#-0x1f
   \   000063   60B0         JZ      ??sapp_functionEpProcess_2
   \   000065   80D2         SJMP    ??sapp_functionEpProcess_3
   \                     ??sapp_functionEpProcess_5:
   \   000067   A3           INC     DPTR
   \   000068   A3           INC     DPTR
   \   000069   A3           INC     DPTR
   \   00006A   A3           INC     DPTR
   \   00006B   E0           MOVX    A,@DPTR
   \   00006C   6401         XRL     A,#0x1
   \   00006E   7002         JNZ     ??sapp_functionEpProcess_7
   \   000070   A3           INC     DPTR
   \   000071   E0           MOVX    A,@DPTR
   \                     ??sapp_functionEpProcess_7:
   \   000072   70C5         JNZ     ??sapp_functionEpProcess_3
   \   000074   EE           MOV     A,R6
   \   000075   2414         ADD     A,#0x14
   \   000077   F582         MOV     DPL,A
   \   000079   EF           MOV     A,R7
   \   00007A   12....       LCALL   ??Subroutine26_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_40:
   \   00007D   12....       LCALL   ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_13:
   \   000080   4046         JC      ??sapp_functionEpProcess_8
   \   000082   EE           MOV     A,R6
   \   000083   2414         ADD     A,#0x14
   \   000085   F582         MOV     DPL,A
   \   000087   EF           MOV     A,R7
   \   000088   12....       LCALL   ??Subroutine26_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   00008B   12....       LCALL   ?Subroutine7 & 0xFFFF
   \                     ??CrossCallReturnLabel_9:
   \   00008E   39           ADDC    A,R1
   \   00008F   FB           MOV     R3,A
   \   000090   8A82         MOV     DPL,R2
   \   000092   8B83         MOV     DPH,R3
   \   000094   12....       LCALL   ??Subroutine31_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_66:
   \   000097   602F         JZ      ??sapp_functionEpProcess_8
   \   000099                ; Setup parameters for indirect call
   \   000099   EE           MOV     A,R6
   \   00009A   241F         ADD     A,#0x1f
   \   00009C   F5..         MOV     ?V0 + 2,A
   \   00009E   EF           MOV     A,R7
   \   00009F   3400         ADDC    A,#0x0
   \   0000A1   F5..         MOV     ?V0 + 3,A
   \   0000A3   78..         MOV     R0,#?V0 + 2
   \   0000A5   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   0000A8   EE           MOV     A,R6
   \   0000A9   240F         ADD     A,#0xf
   \   0000AB   F582         MOV     DPL,A
   \   0000AD   EF           MOV     A,R7
   \   0000AE   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_73:
   \   0000B1   F9           MOV     R1,A
   \   0000B2   12....       LCALL   ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   0000B5   8A82         MOV     DPL,R2
   \   0000B7   8B83         MOV     DPH,R3
   \   0000B9   A3           INC     DPTR
   \   0000BA   A3           INC     DPTR
   \   0000BB   E0           MOVX    A,@DPTR
   \   0000BC   F8           MOV     R0,A
   \   0000BD   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   0000C0   12....       LCALL   ?CALL_IND
   \   0000C3   7402         MOV     A,#0x2
   \   0000C5   12....       LCALL   ?DEALLOC_XSTACK8
   \                     ??sapp_functionEpProcess_8:
   \   0000C8                ; Setup parameters for call to function HalLedBlink
   \   0000C8   7CFA         MOV     R4,#-0x6
   \   0000CA   7D00         MOV     R5,#0x0
   \   0000CC   7B32         MOV     R3,#0x32
   \   0000CE   7A01         MOV     R2,#0x1
   \   0000D0   7902         MOV     R1,#0x2
   \   0000D2   12....       LCALL   ??HalLedBlink?relay
   \   0000D5   02....       LJMP    ??sapp_functionEpProcess_3 & 0xFFFF
   \                     ??sapp_functionEpProcess_6:
   \   0000D8   A3           INC     DPTR
   \   0000D9   E0           MOVX    A,@DPTR
   \   0000DA   90....       MOV     DPTR,#curNwkState
   \   0000DD   F0           MOVX    @DPTR,A
   \   0000DE   6409         XRL     A,#0x9
   \   0000E0   600D         JZ      ??sapp_functionEpProcess_9
   \   0000E2   E0           MOVX    A,@DPTR
   \   0000E3   6407         XRL     A,#0x7
   \   0000E5   6008         JZ      ??sapp_functionEpProcess_9
   \   0000E7   E0           MOVX    A,@DPTR
   \   0000E8   6406         XRL     A,#0x6
   \   0000EA   6003         JZ      $+5
   \   0000EC   02....       LJMP    ??sapp_functionEpProcess_10 & 0xFFFF
   \                     ??sapp_functionEpProcess_9:
   \   0000EF   75..00       MOV     ?V0 + 4,#0x0
   \   0000F2   75..00       MOV     ?V0 + 2,#0x0
   \   0000F5   75..00       MOV     ?V0 + 3,#0x0
   \   0000F8   806D         SJMP    ??sapp_functionEpProcess_11
   \                     ??sapp_functionEpProcess_12:
   \   0000FA   E5..         MOV     A,?V0 + 2
   \   0000FC   75F021       MOV     B,#0x21
   \   0000FF   A4           MUL     AB
   \   000100   F8           MOV     R0,A
   \   000101   AAF0         MOV     R2,B
   \   000103   75F021       MOV     B,#0x21
   \   000106   E5..         MOV     A,?V0 + 3
   \   000108   12....       LCALL   ??Subroutine25_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   00010B   F5..         MOV     ?V0 + 6,A
   \   00010D   74..         MOV     A,#(funcList >> 8) & 0xff
   \   00010F   39           ADDC    A,R1
   \   000110   F5..         MOV     ?V0 + 7,A
   \   000112   85..82       MOV     DPL,?V0 + 6
   \   000115   F583         MOV     DPH,A
   \   000117   12....       LCALL   ??Subroutine32_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_65:
   \   00011A   600E         JZ      ??sapp_functionEpProcess_13
   \   00011C                ; Setup parameters for indirect call
   \   00011C   AA..         MOV     R2,?V0 + 6
   \   00011E   AB..         MOV     R3,?V0 + 7
   \   000120   8A82         MOV     DPL,R2
   \   000122   8B83         MOV     DPH,R3
   \   000124   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000127   12....       LCALL   ?CALL_IND
   \                     ??sapp_functionEpProcess_13:
   \   00012A   85..82       MOV     DPL,?V0 + 6
   \   00012D   85..83       MOV     DPH,?V0 + 7
   \   000130   12....       LCALL   ??Subroutine30_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_67:
   \   000133   6026         JZ      ??sapp_functionEpProcess_14
   \   000135   85..82       MOV     DPL,?V0 + 6
   \   000138   85..83       MOV     DPH,?V0 + 7
   \   00013B   A3           INC     DPTR
   \   00013C   A3           INC     DPTR
   \   00013D   A3           INC     DPTR
   \   00013E   A3           INC     DPTR
   \   00013F   A3           INC     DPTR
   \   000140   A3           INC     DPTR
   \   000141   A3           INC     DPTR
   \   000142   A3           INC     DPTR
   \   000143   A3           INC     DPTR
   \   000144   A3           INC     DPTR
   \   000145   E0           MOVX    A,@DPTR
   \   000146   6013         JZ      ??sapp_functionEpProcess_14
   \   000148   C0E0         PUSH    A
   \   00014A   E5..         MOV     A,?V0 + 6
   \   00014C   240D         ADD     A,#0xd
   \   00014E   F582         MOV     DPL,A
   \   000150   E5..         MOV     A,?V0 + 7
   \   000152   12....       LCALL   ??Subroutine26_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000155   D0E0         POP     A
   \   000157   F0           MOVX    @DPTR,A
   \   000158   75..01       MOV     ?V0 + 4,#0x1
   \                     ??sapp_functionEpProcess_14:
   \   00015B   E5..         MOV     A,?V0 + 2
   \   00015D   2401         ADD     A,#0x1
   \   00015F   F5..         MOV     ?V0 + 2,A
   \   000161   E5..         MOV     A,?V0 + 3
   \   000163   3400         ADDC    A,#0x0
   \   000165   F5..         MOV     ?V0 + 3,A
   \                     ??sapp_functionEpProcess_11:
   \   000167   90....       MOV     DPTR,#funcCount
   \   00016A   E0           MOVX    A,@DPTR
   \   00016B   F8           MOV     R0,A
   \   00016C   C3           CLR     C
   \   00016D   E5..         MOV     A,?V0 + 2
   \   00016F   98           SUBB    A,R0
   \   000170   E5..         MOV     A,?V0 + 3
   \   000172   12....       LCALL   ?Subroutine24 & 0xFFFF
   \                     ??CrossCallReturnLabel_34:
   \   000175   4083         JC      ??sapp_functionEpProcess_12
   \   000177   E5..         MOV     A,?V0 + 4
   \   000179   A2E0         MOV     C,0xE0 /* A   */.0
   \   00017B   4003         JC      $+5
   \   00017D   02....       LJMP    ??sapp_functionEpProcess_3 & 0xFFFF
   \   000180                ; Setup parameters for call to function osal_start_timerEx
   \   000180   7CE8         MOV     R4,#-0x18
   \   000182   7D03         MOV     R5,#0x3
   \   000184   7A01         MOV     R2,#0x1
   \   000186   7B00         MOV     R3,#0x0
   \   000188   A9..         MOV     R1,?V0 + 8
   \   00018A   12....       LCALL   ??osal_start_timerEx?relay
   \   00018D   02....       LJMP    ??sapp_functionEpProcess_3 & 0xFFFF
   \                     ??sapp_functionEpProcess_10:
   \   000190                ; Setup parameters for call to function osal_stop_timerEx
   \   000190   7A01         MOV     R2,#0x1
   \   000192   7B00         MOV     R3,#0x0
   \   000194   A9..         MOV     R1,?V0 + 8
   \   000196   12....       LCALL   ??osal_stop_timerEx?relay
   \   000199   02....       LJMP    ??sapp_functionEpProcess_3 & 0xFFFF
    339                  }
    340                  // return unprocessed events
    341                  return (events ^ SYS_EVENT_MSG);
   \                     ??sapp_functionEpProcess_4:
   \   00019C   AA..         MOV     R2,?V0 + 0
   \   00019E   E5..         MOV     A,?V0 + 1
   \   0001A0   6480         XRL     A,#0x80
   \   0001A2   FB           MOV     R3,A
   \   0001A3   02....       LJMP    ??sapp_functionEpProcess_15 & 0xFFFF
    342              }
    343          
    344              // 定时器时间到, 遍历所有端点看是否有需要调用time_out
    345              if(events & SAPP_SEND_PERIODIC_MSG_EVT)
   \                     ??sapp_functionEpProcess_0:
   \   0001A6   EA           MOV     A,R2
   \   0001A7   A2E0         MOV     C,0xE0 /* A   */.0
   \   0001A9   4003         JC      $+5
   \   0001AB   02....       LJMP    ??sapp_functionEpProcess_16 & 0xFFFF
    346              {
    347                  int i;
    348                  for(i = 0; i < funcCount; i++)
   \   0001AE   7E00         MOV     R6,#0x0
   \   0001B0   7F00         MOV     R7,#0x0
   \   0001B2   806E         SJMP    ??CrossCallReturnLabel_26
    349                  {
    350                      struct ep_info_t *ep = &funcList[i];
   \                     ??sapp_functionEpProcess_17:
   \   0001B4   12....       LCALL   ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_39:
   \   0001B7   F5..         MOV     ?V0 + 2,A
   \   0001B9   74..         MOV     A,#(funcList >> 8) & 0xff
   \   0001BB   39           ADDC    A,R1
   \   0001BC   F5..         MOV     ?V0 + 3,A
    351                      if(ep->time_out && ep->function.cycle)
   \   0001BE   85..82       MOV     DPL,?V0 + 2
   \   0001C1   F583         MOV     DPH,A
   \   0001C3   12....       LCALL   ??Subroutine30_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_68:
   \   0001C6   6057         JZ      ??sapp_functionEpProcess_18
   \   0001C8   85..82       MOV     DPL,?V0 + 2
   \   0001CB   85..83       MOV     DPH,?V0 + 3
   \   0001CE   A3           INC     DPTR
   \   0001CF   A3           INC     DPTR
   \   0001D0   A3           INC     DPTR
   \   0001D1   A3           INC     DPTR
   \   0001D2   A3           INC     DPTR
   \   0001D3   A3           INC     DPTR
   \   0001D4   A3           INC     DPTR
   \   0001D5   A3           INC     DPTR
   \   0001D6   A3           INC     DPTR
   \   0001D7   A3           INC     DPTR
   \   0001D8   E0           MOVX    A,@DPTR
   \   0001D9   6044         JZ      ??sapp_functionEpProcess_18
    352                      {
    353                          // 端点需要周期执行
    354                          ep->timerTick = ep->timerTick - 1;
   \   0001DB   E5..         MOV     A,?V0 + 2
   \   0001DD   240D         ADD     A,#0xd
   \   0001DF   F582         MOV     DPL,A
   \   0001E1   E5..         MOV     A,?V0 + 3
   \   0001E3   12....       LCALL   ??Subroutine34_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_74:
   \   0001E6   14           DEC     A
   \   0001E7   F0           MOVX    @DPTR,A
    355                          if(ep->timerTick == 0)
   \   0001E8   7035         JNZ     ??sapp_functionEpProcess_18
    356                          {
    357                            // 定时时间到,执行time_out函数
    358                            (*ep->time_out)(ep);
   \   0001EA                ; Setup parameters for indirect call
   \   0001EA   AA..         MOV     R2,?V0 + 2
   \   0001EC   AB..         MOV     R3,?V0 + 3
   \   0001EE   8A82         MOV     DPL,R2
   \   0001F0   8B83         MOV     DPH,R3
   \   0001F2   A3           INC     DPTR
   \   0001F3   A3           INC     DPTR
   \   0001F4   A3           INC     DPTR
   \   0001F5   A3           INC     DPTR
   \   0001F6   E0           MOVX    A,@DPTR
   \   0001F7   F8           MOV     R0,A
   \   0001F8   12....       LCALL   ??Subroutine27_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_59:
   \   0001FB   12....       LCALL   ?CALL_IND
    359                            ep->timerTick = ep->function.cycle;
   \   0001FE   85..82       MOV     DPL,?V0 + 2
   \   000201   85..83       MOV     DPH,?V0 + 3
   \   000204   A3           INC     DPTR
   \   000205   A3           INC     DPTR
   \   000206   A3           INC     DPTR
   \   000207   A3           INC     DPTR
   \   000208   A3           INC     DPTR
   \   000209   A3           INC     DPTR
   \   00020A   A3           INC     DPTR
   \   00020B   A3           INC     DPTR
   \   00020C   A3           INC     DPTR
   \   00020D   A3           INC     DPTR
   \   00020E   E0           MOVX    A,@DPTR
   \   00020F   C0E0         PUSH    A
   \   000211   E5..         MOV     A,?V0 + 2
   \   000213   240D         ADD     A,#0xd
   \   000215   F582         MOV     DPL,A
   \   000217   E5..         MOV     A,?V0 + 3
   \   000219   12....       LCALL   ??Subroutine26_0 & 0xFFFF
    360                          }
    361                      }
    362          #if 0
    363                      if(ep->userTimer && ep->res_available)
    364                      {
    365                          ep->userTimer = ep->userTimer - 1;
    366                          if(ep->userTimer <= 1)
    367                          {
    368                              (*ep->res_available)(ep, ResUserTimer, NULL);
    369                              ep->userTimer = 0;
    370                          }
    371                      }
    372          #endif
    373                  }
   \                     ??CrossCallReturnLabel_43:
   \   00021C   D0E0         POP     A
   \   00021E   F0           MOVX    @DPTR,A
   \                     ??sapp_functionEpProcess_18:
   \   00021F   12....       LCALL   ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   000222   12....       LCALL   ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   000225   408D         JC      ??sapp_functionEpProcess_17
    374                  // 重新启动定时器
    375                  osal_start_timerEx(task_id, SAPP_SEND_PERIODIC_MSG_EVT, 1000);
   \   000227                ; Setup parameters for call to function osal_start_timerEx
   \   000227   7CE8         MOV     R4,#-0x18
   \   000229   7D03         MOV     R5,#0x3
   \   00022B   7A01         MOV     R2,#0x1
   \   00022D   7B00         MOV     R3,#0x0
   \   00022F   A9..         MOV     R1,?V0 + 8
   \   000231   12....       LCALL   ??osal_start_timerEx?relay
    376                  // return unprocessed events
    377                  return (events ^ SAPP_SEND_PERIODIC_MSG_EVT);
   \   000234   E5..         MOV     A,?V0 + 0
   \   000236   6401         XRL     A,#0x1
   \   000238   FA           MOV     R2,A
   \   000239   AB..         MOV     R3,?V0 + 1
   \   00023B   8004         SJMP    ??sapp_functionEpProcess_15
    378              }
    379              // Discard unknown events
    380              return 0;
   \                     ??sapp_functionEpProcess_16:
   \   00023D   7A00         MOV     R2,#0x0
   \   00023F   7B00         MOV     R3,#0x0
   \                     ??sapp_functionEpProcess_15:
   \   000241   7F09         MOV     R7,#0x9
   \   000243   02....       LJMP    ?BANKED_LEAVE_XDATA
    381          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   F8           MOV     R0,A
   \   000002   90....       MOV     DPTR,#funcCount
   \   000005   E0           MOVX    A,@DPTR
   \   000006   C3           CLR     C
   \   000007   98           SUBB    A,R0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   E0           MOVX    A,@DPTR
   \   000001   75F021       MOV     B,#0x21
   \   000004   A4           MUL     AB
   \   000005   F8           MOV     R0,A
   \   000006   A9F0         MOV     R1,B
   \   000008   74..         MOV     A,#(funcList + 223) & 0xff
   \   00000A   28           ADD     A,R0
   \   00000B   FA           MOV     R2,A
   \   00000C   74..         MOV     A,#((funcList - 33) >> 8) & 0xff
   \   00000E   22           RET
    382          
    383          #if defined(ZDO_COORDINATOR)
    384          static uint8 uartMsgProcesser(uint8 *msg)
    385          {
    386              mtOSALSerialData_t *pMsg = (mtOSALSerialData_t *)msg;
    387              mtUserSerialMsg_t *pMsgBody = (mtUserSerialMsg_t *)pMsg->msg;
    388              if ( (curNwkState != DEV_ZB_COORD)
    389                      && (curNwkState != DEV_ROUTER)
    390                      && (curNwkState != DEV_END_DEVICE) )
    391                  return 1;
    392              switch(pMsgBody->cmd)
    393              {
    394              case 0x0018:
    395                  {
    396                      switch(pMsgBody->cmdEndPoint)
    397                      {
    398                      case 0xF1:
    399                          {
    400                              // 转发数据
    401                              SendData(TRANSFER_ENDPOINT, pMsgBody->data,
    402                                       pMsgBody->addr, pMsgBody->endPoint,
    403                                       pMsgBody->len - 6);
    404                          }
    405                          break;
    406                      }
    407                  }
    408                  break;
    409              }
    410              return 1;
    411          }
    412          #endif
    413          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    414          uint8 SendData(uint8 srcEP, const void *buf, uint16 addr, uint8 dstEP, uint8 Len)
   \                     SendData:
    415          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV     A,#-0xc
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   E9           MOV     A,R1
   \   00000B   FE           MOV     R6,A
   \   00000C   8A..         MOV     ?V0 + 0,R2
   \   00000E   8B..         MOV     ?V0 + 1,R3
   \   000010   7418         MOV     A,#0x18
   \   000012   12....       LCALL   ?XSTACK_DISP0_8
   \   000015   E0           MOVX    A,@DPTR
   \   000016   F5..         MOV     ?V0 + 2,A
   \   000018   7419         MOV     A,#0x19
   \   00001A   12....       LCALL   ?XSTACK_DISP0_8
   \   00001D   E0           MOVX    A,@DPTR
   \   00001E   FF           MOV     R7,A
    416              static uint8 transID = 0;
    417              afAddrType_t SendDataAddr;
    418              struct ep_info_t *epInfo;
    419          
    420              if(srcEP <= funcCount)
   \   00001F   90....       MOV     DPTR,#funcCount
   \   000022   E0           MOVX    A,@DPTR
   \   000023   C3           CLR     C
   \   000024   9E           SUBB    A,R6
   \   000025   4016         JC      ??SendData_0
    421                  epInfo = &funcList[srcEP - 1];
   \   000027   EE           MOV     A,R6
   \   000028   75F021       MOV     B,#0x21
   \   00002B   A4           MUL     AB
   \   00002C   F8           MOV     R0,A
   \   00002D   A9F0         MOV     R1,B
   \   00002F   74..         MOV     A,#(funcList + 223) & 0xff
   \   000031   28           ADD     A,R0
   \   000032   F8           MOV     R0,A
   \   000033   74..         MOV     A,#((funcList - 33) >> 8) & 0xff
   \   000035   39           ADDC    A,R1
   \   000036   F9           MOV     R1,A
   \   000037   E8           MOV     A,R0
   \   000038   FA           MOV     R2,A
   \   000039   E9           MOV     A,R1
   \   00003A   FB           MOV     R3,A
   \   00003B   8004         SJMP    ??SendData_1
    422              else
    423                  epInfo = &controlEndPointInfo;
   \                     ??SendData_0:
   \   00003D   7A..         MOV     R2,#controlEndPointInfo & 0xff
   \   00003F   7B..         MOV     R3,#(controlEndPointInfo >> 8) & 0xff
    424          
    425              SendDataAddr.addrMode = (afAddrMode_t)Addr16Bit;         //短地址发送
   \                     ??SendData_1:
   \   000041   7408         MOV     A,#0x8
   \   000043   12....       LCALL   ?XSTACK_DISP0_8
   \   000046   7402         MOV     A,#0x2
   \   000048   F0           MOVX    @DPTR,A
    426              SendDataAddr.endPoint = dstEP;
   \   000049   7409         MOV     A,#0x9
   \   00004B   12....       LCALL   ?XSTACK_DISP0_8
   \   00004E   E5..         MOV     A,?V0 + 2
   \   000050   F0           MOVX    @DPTR,A
    427              SendDataAddr.addr.shortAddr = addr;
   \   000051   85..82       MOV     DPL,?XSP + 0
   \   000054   85..83       MOV     DPH,?XSP + 1
   \   000057   EC           MOV     A,R4
   \   000058   F0           MOVX    @DPTR,A
   \   000059   A3           INC     DPTR
   \   00005A   ED           MOV     A,R5
   \   00005B   F0           MOVX    @DPTR,A
    428              if ( AF_DataRequest( &SendDataAddr, //发送的地址和模式
    429                                   // TODO:
    430                                   &epInfo->SampleApp_epDesc,   //终端（比如操作系统中任务ID等）
    431                                   SAPP_PERIODIC_CLUSTERID,//发送串ID
    432                                   Len,
    433                                   (uint8*)buf,
    434                                   &transID,  //信息ID（操作系统参数）
    435                                   AF_DISCV_ROUTE,
    436                                   AF_DEFAULT_RADIUS ) == afStatus_SUCCESS )
   \   00005C                ; Setup parameters for call to function AF_DataRequest
   \   00005C   75..1E       MOV     ?V0 + 2,#0x1e
   \   00005F   78..         MOV     R0,#?V0 + 2
   \   000061   12....       LCALL   ?PUSH_XSTACK_I_ONE
   \   000064   75....       MOV     ?V0 + 2,#??transID & 0xff
   \   000067   75....       MOV     ?V0 + 3,#(??transID >> 8) & 0xff
   \   00006A   78..         MOV     R0,#?V0 + 2
   \   00006C   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00006F   78..         MOV     R0,#?V0 + 0
   \   000071   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000074   8F..         MOV     ?V0 + 0,R7
   \   000076   75..00       MOV     ?V0 + 1,#0x0
   \   000079   78..         MOV     R0,#?V0 + 0
   \   00007B   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   00007E   75..01       MOV     ?V0 + 0,#0x1
   \   000081   78..         MOV     R0,#?V0 + 0
   \   000083   12....       LCALL   ?PUSH_XSTACK_I_TWO
   \   000086   7920         MOV     R1,#0x20
   \   000088   EA           MOV     A,R2
   \   000089   240F         ADD     A,#0xf
   \   00008B   FC           MOV     R4,A
   \   00008C   EB           MOV     A,R3
   \   00008D   3400         ADDC    A,#0x0
   \   00008F   FD           MOV     R5,A
   \   000090   7409         MOV     A,#0x9
   \   000092   12....       LCALL   ?XSTACK_DISP0_8
   \   000095   AA82         MOV     R2,DPL
   \   000097   AB83         MOV     R3,DPH
   \   000099   12....       LCALL   ??AF_DataRequest?relay
   \   00009C   7409         MOV     A,#0x9
   \   00009E   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000A1   E9           MOV     A,R1
   \   0000A2   7011         JNZ     ??SendData_2
    437              {
    438                  HalLedBlink( HAL_LED_1, 1, 50, 250 );
   \   0000A4                ; Setup parameters for call to function HalLedBlink
   \   0000A4   7CFA         MOV     R4,#-0x6
   \   0000A6   7D00         MOV     R5,#0x0
   \   0000A8   7B32         MOV     R3,#0x32
   \   0000AA   7A01         MOV     R2,#0x1
   \   0000AC   7901         MOV     R1,#0x1
   \   0000AE   12....       LCALL   ??HalLedBlink?relay
    439                  return 1;
   \   0000B1   7901         MOV     R1,#0x1
   \   0000B3   8002         SJMP    ??SendData_3
    440              }
    441              else
    442              {
    443                  return 0;
   \                     ??SendData_2:
   \   0000B5   7900         MOV     R1,#0x0
   \                     ??SendData_3:
   \   0000B7   740C         MOV     A,#0xc
   \   0000B9   12....       LCALL   ?DEALLOC_XSTACK8
   \   0000BC   7F04         MOV     R7,#0x4
   \   0000BE   02....       LJMP    ?BANKED_LEAVE_XDATA
    444              }
    445          }

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??transID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    446          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    447          void CreateUserTimer(struct ep_info_t *ep, uint8 seconds)
   \                     CreateUserTimer:
    448          {
   \   000000   74F7         MOV     A,#-0x9
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
   \   000005   E9           MOV     A,R1
   \   000006   FE           MOV     R6,A
    449              if(ep == NULL)
   \   000007   EA           MOV     A,R2
   \   000008   4B           ORL     A,R3
   \   000009   6029         JZ      ??CreateUserTimer_0
    450                  return;
    451              if(ep->res_available == NULL)
   \   00000B   12....       LCALL   ??Subroutine28_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_71:
   \   00000E   6024         JZ      ??CreateUserTimer_0
    452                  return;
    453              ep->userTimer = seconds;
   \   000010   EA           MOV     A,R2
   \   000011   240E         ADD     A,#0xe
   \   000013   12....       LCALL   ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_51:
   \   000016   EE           MOV     A,R6
   \   000017   F0           MOVX    @DPTR,A
    454              if(isUserTimerRunning == 0)
   \   000018   90....       MOV     DPTR,#isUserTimerRunning
   \   00001B   E0           MOVX    A,@DPTR
   \   00001C   7016         JNZ     ??CreateUserTimer_0
    455              {
    456                  osal_start_timerEx(controlTaskId,
    457                                     SAPP_SEND_PERIODIC_MSG_EVT,
    458                                     1000);
   \   00001E                ; Setup parameters for call to function osal_start_timerEx
   \   00001E   7CE8         MOV     R4,#-0x18
   \   000020   7D03         MOV     R5,#0x3
   \   000022   7A01         MOV     R2,#0x1
   \   000024   7B00         MOV     R3,#0x0
   \   000026   90....       MOV     DPTR,#controlTaskId
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   F9           MOV     R1,A
   \   00002B   12....       LCALL   ??osal_start_timerEx?relay
    459                  isUserTimerRunning = 1;
   \   00002E   90....       MOV     DPTR,#isUserTimerRunning
   \   000031   7401         MOV     A,#0x1
   \   000033   F0           MOVX    @DPTR,A
   \                     ??CreateUserTimer_0:
   \   000034   7F01         MOV     R7,#0x1
   \   000036   02....       LJMP    ?BANKED_LEAVE_XDATA
    460              }
    461          }
    462          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    463          void DeleteUserTimer(struct ep_info_t *ep)
   \                     DeleteUserTimer:
    464          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    465              if(ep == NULL)
   \   000004   EA           MOV     A,R2
   \   000005   4B           ORL     A,R3
   \   000006   6003         JZ      ??CrossCallReturnLabel_81
    466                  return;
    467              ep->userTimer = 0;
   \   000008   12....       LCALL   ?Subroutine14 & 0xFFFF
    468          }
   \                     ??CrossCallReturnLabel_81:
   \   00000B                REQUIRE ?Subroutine1
   \   00000B                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   D083         POP     DPH
   \   000002   D082         POP     DPL
   \   000004   02....       LJMP    ?BRET
    469          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    470          void ModifyRefreshCycle(struct ep_info_t *ep, uint8 seconds)
   \                     ModifyRefreshCycle:
    471          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    472              if(ep == NULL)
   \   000004   EA           MOV     A,R2
   \   000005   4B           ORL     A,R3
   \   000006   6029         JZ      ??ModifyRefreshCycle_0
    473                  return;
    474              if(ep->time_out == NULL)
   \   000008   8A82         MOV     DPL,R2
   \   00000A   8B83         MOV     DPH,R3
   \   00000C   12....       LCALL   ??Subroutine37_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   00000F   EC           MOV     A,R4
   \   000010   4D           ORL     A,R5
   \   000011   601E         JZ      ??ModifyRefreshCycle_0
    475                  return;
    476              ep->function.cycle = seconds;
   \   000013   E9           MOV     A,R1
   \   000014   8A82         MOV     DPL,R2
   \   000016   8B83         MOV     DPH,R3
   \   000018   A3           INC     DPTR
   \   000019   A3           INC     DPTR
   \   00001A   A3           INC     DPTR
   \   00001B   A3           INC     DPTR
   \   00001C   A3           INC     DPTR
   \   00001D   A3           INC     DPTR
   \   00001E   A3           INC     DPTR
   \   00001F   A3           INC     DPTR
   \   000020   A3           INC     DPTR
   \   000021   A3           INC     DPTR
   \   000022   F0           MOVX    @DPTR,A
    477              if(ep->timerTick > seconds)
   \   000023   EA           MOV     A,R2
   \   000024   240D         ADD     A,#0xd
   \   000026   12....       LCALL   ??Subroutine33_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_75:
   \   000029   F8           MOV     R0,A
   \   00002A   E9           MOV     A,R1
   \   00002B   C3           CLR     C
   \   00002C   98           SUBB    A,R0
   \   00002D   5002         JNC     ??ModifyRefreshCycle_0
    478                  ep->timerTick = seconds;
   \   00002F   E9           MOV     A,R1
   \   000030   F0           MOVX    @DPTR,A
   \                     ??ModifyRefreshCycle_0:
   \   000031   80..         SJMP    ?Subroutine1
    479          }

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for topoBuffer>`:
   \   000000   02           DB 2
   \   000001   00           DB 0
   \   000002   00           DB 0
   \   000003   00           DB 0
   \   000004   00           DB 0
   \   000005   00           DB 0
   \   000006   00           DB 0
   \   000007   00           DB 0
   \   000008   00           DB 0
   \   000009   0000         DW 0
   \   00000B   0000         DW 0
   \   00000D   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for commonClusterId>`:
   \   000000   0100         DW 1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sapp_taskInitProcess?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sapp_taskInitProcess

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??createEndPoint?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    createEndPoint

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sapp_controlEpProcess?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sapp_controlEpProcess

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??sapp_functionEpProcess?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    sapp_functionEpProcess

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??SendData?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    SendData

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??CreateUserTimer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    CreateUserTimer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??DeleteUserTimer?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    DeleteUserTimer

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??ModifyRefreshCycle?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    ModifyRefreshCycle

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {3, 0, 0}>`:
   \   000000   03           DB 3
   \   000001   00           DB 0
   \   000002   00           DB 0
    480          
    481          #if ! defined(ZDO_COORDINATOR) && defined(RTR_NWK)
    482          void RouterTimeoutRoutine(struct ep_info_t *ep)
    483          {
    484              SendData(ep->ep, (unsigned char *)&topoBuffer, 0x0000, TRANSFER_ENDPOINT, sizeof(TOPOINFO)); //节点向协调器发送采集数据
    485          }
    486          #endif
    487          
    488          #if defined(ZDO_COORDINATOR)
    489          void CoordinatorIncomingRoutine(struct ep_info_t *ep, uint16 addr, uint8 endPoint, afMSGCommandFormat_t *msg)
    490          {
    491              //msg->Data[], msg->DataLength, msg->TransSeqNumber
    492              // 转发数据到串口
    493              if(msg->DataLength > 0)
    494              {
    495                  mtUserSerialMsg_t *pMsg = osal_mem_alloc(sizeof(mtUserSerialMsg_t) + msg->DataLength - 1);
    496                  pMsg->sop = MT_UART_SOF;
    497                  pMsg->len = msg->DataLength + 6;
    498                  pMsg->cmd = 0x0018;
    499                  pMsg->cmdEndPoint = 0xF1;
    500                  pMsg->addr = addr;
    501                  pMsg->endPoint = endPoint;
    502                  memcpy(pMsg->data, msg->Data, msg->DataLength);
    503                  pMsg->fsc = MT_UartCalcFCS(0, &pMsg->len, 1);
    504                  pMsg->fsc = MT_UartCalcFCS(pMsg->fsc, pMsg->dataBody, pMsg->len);
    505                  HalUARTWrite(HAL_UART_PORT_0, &pMsg->sop, sizeof(mtUserSerialMsg_t) - 2 + msg->DataLength);
    506                  HalUARTWrite(HAL_UART_PORT_0, &pMsg->fsc, 1);
    507                  osal_mem_free(pMsg);
    508              }
    509          }
    510          #endif
    511          #endif//SAPP_ZSTACK

   Maximum stack usage in bytes:

     Function                    ISTACK PSTACK XSTACK
     --------                    ------ ------ ------
     CreateUserTimer                 1      0      9
       -> osal_start_timerEx         0      0     18
     DeleteUserTimer                 2      0      0
     ModifyRefreshCycle              3      0      0
     SendData                        1      0     57
       -> AF_DataRequest             0      0     66
       -> HalLedBlink                0      0     48
     createEndPoint                  1      0     20
       -> afRegister                 0      0     20
     sapp_controlEpProcess           2      0     25
       -> osal_msg_receive           0      0     44
       -> NLME_GetExtAddr            0      0     48
       -> memcpy                     0      0     48
       -> NLME_GetCoordShortAddr     0      0     44
       -> osal_memcpy                0      0     50
       -> osal_memcpy                0      0     50
       -> SendData                   0      0     48
       -> HalLedBlink                0      0     44
       -> osal_msg_deallocate        0      0     44
       -> osal_msg_receive           0      0     44
       -> SendData                   0      0     48
       -> SendData                   0      0     48
       -> SendData                   0      0     48
       -> HalLedBlink                0      0     44
       -> osal_start_timerEx         0      0     44
       -> osal_stop_timerEx          0      0     44
     sapp_functionEpProcess          1      0     19
       -> osal_msg_receive           0      0     34
       -> osal_msg_deallocate        0      0     34
       -> osal_msg_receive           0      0     34
       -> HalLedBlink                0      0     34
       -> osal_start_timerEx         0      0     34
       -> osal_stop_timerEx          0      0     34
       -> osal_start_timerEx         0      0     34
     sapp_taskInitProcess            1      0     10
       -> osal_mem_alloc             0      0     20
       -> HalIOInit                  0      0     20
       -> createEndPoint             0      0     20
       -> createEndPoint             0      0     20


   Segment part sizes:

     Function/Label                     Bytes
     --------------                     -----
     topoBuffer                           14
     funcTableBuffer                       2
     curNwkState                           1
     controlTaskId                         1
     functionTaskId                        1
     controlEndPointInfo                  33
     isUserTimerRunning                    1
     sapp_taskInitProcess                250
     ?Subroutine0                          5
     ?Subroutine20                        16
     ??Subroutine25_0                      7
     ?Subroutine9                         16
     ?Subroutine11                         6
     ?Subroutine23                        15
     ?Subroutine18                         9
     ?Subroutine6                          8
     ?Subroutine21                        14
     ?Subroutine4                         10
     ??Subroutine27_0                      7
     ?Subroutine3                         13
     ?Subroutine24                         8
     ??Subroutine29_0                      2
     ??Subroutine30_0                      2
     ??Subroutine31_0                      2
     ??Subroutine32_0                      8
     createEndPoint                      170
     ?Subroutine17                         3
     ??Subroutine26_0                      4
     ?Subroutine16                         8
     ?Subroutine15                        12
     ?Subroutine22                         3
     ??Subroutine35_0                      5
     ?Subroutine14                         3
     ??Subroutine36_0                      6
     commonClusterId                       2
     sapp_controlEpProcess               743
     ?Subroutine19                        10
     ?Subroutine12                        15
     ?Subroutine5                         23
     ?Subroutine2                          2
     ??Subroutine28_0                      4
     ?Subroutine13                         3
     ??Subroutine33_0                      3
     ??Subroutine34_0                      5
     ?Subroutine8                          6
     ??Subroutine37_0                      1
     ??Subroutine38_0                      9
     sapp_functionEpProcess              582
     ?Subroutine10                         9
     ?Subroutine7                         15
     SendData                            193
     transID                               1
     CreateUserTimer                      57
     DeleteUserTimer                      11
     ?Subroutine1                          7
     ModifyRefreshCycle                   51
     ?<Initializer for topoBuffer>        14
     ?<Initializer for commonClusterId>    2
     ??sapp_taskInitProcess?relay          6
     ??createEndPoint?relay                6
     ??sapp_controlEpProcess?relay         6
     ??sapp_functionEpProcess?relay        6
     ??SendData?relay                      6
     ??CreateUserTimer?relay               6
     ??DeleteUserTimer?relay               6
     ??ModifyRefreshCycle?relay            6
     ?<Constant {3, 0, 0}>                 3

 
 2 361 bytes in segment BANKED_CODE
    48 bytes in segment BANK_RELAYS
    16 bytes in segment XDATA_I
    16 bytes in segment XDATA_ID
     3 bytes in segment XDATA_ROM_C
    40 bytes in segment XDATA_Z
 
 2 425 bytes of CODE  memory
     3 bytes of CONST memory
    56 bytes of XDATA memory

Errors: none
Warnings: none
